var e,s;e=this,s=function(e,s){"use strict";const t=e=>typeof e,o="",r=t(o),l="Result",u="Ids",d="Table",n=d+"s",i=d+u,a="Row",c=a+"Count",I=a+u,C="Sorted"+a+u,w="Cell",b=w+u,p="Value",R=p+"s",k=p+u,g=e=>null==e,m=(e,s,t)=>g(e)?t?.():s(e),h=e=>t(e)==r,L=()=>{},V=(e,s)=>e.map(s),y=Object.keys,{createContext:S,useContext:T}=s,f=S([]),v=(e,s)=>{const t=T(f);return g(e)?t[s]:h(e)?((e,s)=>m(e,(e=>e[s])))(t[s+1],e):e},x=(e,s)=>{const t=v(e,s);return g(e)||h(e)?t:e},P=e=>y(T(f)[e]),q=e=>x(e,0),B=e=>x(e,2),M=e=>x(e,4),D=e=>x(e,6),A=e=>x(e,8),F=e=>x(e,10),{useCallback:G,useEffect:Q,useMemo:j,useRef:E,useState:U}=s,O=(e,s,t=[])=>{const o=j((()=>s(e)),[e,...t]);return Q((()=>()=>o.destroy()),[o]),o},z=(e,s,t,o=[],r)=>{const[,l]=U(),u=G((()=>s?.["get"+e]?.(...o)??t),[s,...o]),[d]=U(u),n=E(d);return j((()=>n.current=u()),[u]),H(e,s,((...e)=>{n.current=g(r)?u():e[r],l([])}),[],o),n.current},H=(e,s,t,o=[],r=[],...l)=>Q((()=>{const o=s?.["add"+e+"Listener"]?.(...r,t,...l);return()=>s?.delListener(o)}),[s,...r,...o,...l]),J=(e,s,t,o=[],r=L,l=[],...u)=>{const d=q(e);return G((e=>m(d,(o=>m(t(e,o),(e=>r(o["set"+s](...u,e),e)))))),[d,s,...o,...l,...u])},K=(e,s,t=L,o=[],...r)=>{const l=q(e);return G((()=>t(l?.["del"+s](...r))),[l,s,...o,...r])},N=(e,s,t)=>{const o=F(e);return G((()=>o?.[s](t)),[o,s,t])},W=e=>z(i,q(e),[],[]),X=(e,s)=>z(I,q(s),[],[e]),Y=(e,s,t,o=0,r,l)=>z(C,q(l),[],[e,s,t,o,r],6),Z=(e,s,t)=>z(b,q(t),[],[e,s]),$=(e,s,t,o)=>z(w,q(o),void 0,[e,s,t],4),_=e=>z(k,q(e),[],[]),ee=(e,s)=>z(p,q(s),void 0,[e]),se=(e,s)=>z("Metric",B(s),void 0,[e]),te=(e,s)=>z("SliceIds",M(s),[],[e]),oe=(e,s,t)=>z("Slice"+I,M(t),[],[e,s]),re=(e,s,t)=>z("RemoteRowId",D(t),void 0,[e,s]),le=(e,s,t)=>z("Local"+I,D(t),[],[e,s]),ue=(e,s,t)=>z("Linked"+I,D(t),[],[e,s]),de=(e,s)=>z(l+I,A(s),[],[e]),ne=(e,s,t,o=0,r,u)=>z(l+C,A(u),[],[e,s,t,o,r],6),ie=(e,s,t)=>z(l+b,A(t),[],[e,s]),ae=(e,s,t,o)=>z(l+w,A(o),void 0,[e,s,t]),ce=e=>z("CheckpointIds",F(e),[[],void 0,[]]),Ie=(e,s)=>z("Checkpoint",F(s),void 0,[e]),Ce=e=>N(e,"goBackward"),we=e=>N(e,"goForward"),{createElement:be}=s,pe=(e,...s)=>g(e)?{}:e(...s),{useMemo:Re}=s,ke=({tableId:e,store:s,rowComponent:t=Se,getRowComponentProps:o,customCellIds:r,separator:l,debugIds:u},d)=>Ve(V(d,(l=>be(t,{...pe(o,l),key:l,tableId:e,rowId:l,customCellIds:r,store:s,debugIds:u}))),l,u,e),ge=({queryId:e,queries:s,resultRowComponent:t=Pe,getResultRowComponentProps:o,separator:r,debugIds:l},u)=>Ve(V(u,(r=>be(t,{...pe(o,r),key:r,queryId:e,rowId:r,queries:s,debugIds:l}))),r,l,e),me=e=>{const s=D(e);return[s,s?.getStore()]},he=({relationshipId:e,relationships:s,rowComponent:t=Se,getRowComponentProps:o,separator:r,debugIds:l},u,d)=>{const[n,i]=me(s),a=n?.getLocalTableId(e),c=u(e,d,n);return Ve(V(c,(e=>be(t,{...pe(o,e),key:e,tableId:a,rowId:e,store:i,debugIds:l}))),r,l,d)},Le=e=>({checkpoints:s,checkpointComponent:t=qe,getCheckpointComponentProps:o,separator:r,debugIds:l})=>{const u=F(s);return Ve(V(e(ce(u)),(e=>be(t,{...pe(o,e),key:e,checkpoints:u,checkpointId:e,debugIds:l}))),r)},Ve=(e,s,t,o)=>{const r=g(s)||!Array.isArray(e)?e:V(e,((e,t)=>t>0?[s,e]:e));return t?[o,":{",r,"}"]:r},ye=({tableId:e,rowId:s,cellId:t,store:r,debugIds:l})=>Ve(o+($(e,s,t,r)??o),void 0,l,t),Se=({tableId:e,rowId:s,store:t,cellComponent:o=ye,getCellComponentProps:r,customCellIds:l,separator:u,debugIds:d})=>Ve(V(((e,s,t,o)=>{const r=Z(s,t,o);return e??r})(l,e,s,t),(l=>be(o,{...pe(r,l),key:l,tableId:e,rowId:s,cellId:l,store:t,debugIds:d}))),u,d,s),Te=e=>ke(e,X(e.tableId,e.store)),fe=({valueId:e,store:s,debugIds:t})=>Ve(o+(ee(e,s)??o),void 0,t,e),ve=({indexId:e,sliceId:s,indexes:t,rowComponent:o=Se,getRowComponentProps:r,separator:l,debugIds:u})=>{const d=M(t),n=d?.getStore(),i=d?.getTableId(e),a=oe(e,s,d);return Ve(V(a,(e=>be(o,{...pe(r,e),key:e,tableId:i,rowId:e,store:n,debugIds:u}))),l,u,s)},xe=({queryId:e,rowId:s,cellId:t,queries:r,debugIds:l})=>Ve(o+(ae(e,s,t,r)??o),void 0,l,t),Pe=({queryId:e,rowId:s,queries:t,resultCellComponent:o=xe,getResultCellComponentProps:r,separator:l,debugIds:u})=>Ve(V(ie(e,s,t),(l=>be(o,{...pe(r,l),key:l,queryId:e,rowId:s,cellId:l,queries:t,debugIds:u}))),l,u,s),qe=({checkpoints:e,checkpointId:s,debugIds:t})=>Ve(Ie(s,e)??o,void 0,t,s),Be=Le((e=>e[0])),Me=Le((e=>g(e[1])?[]:[e[1]])),De=Le((e=>e[2]));e.BackwardCheckpointsView=Be,e.CellView=ye,e.CheckpointView=qe,e.CurrentCheckpointView=Me,e.ForwardCheckpointsView=De,e.IndexView=({indexId:e,indexes:s,sliceComponent:t=ve,getSliceComponentProps:o,separator:r,debugIds:l})=>Ve(V(te(e,s),(r=>be(t,{...pe(o,r),key:r,indexId:e,sliceId:r,indexes:s,debugIds:l}))),r,l,e),e.LinkedRowsView=e=>he(e,ue,e.firstRowId),e.LocalRowsView=e=>he(e,le,e.remoteRowId),e.MetricView=({metricId:e,metrics:s,debugIds:t})=>Ve(se(e,s)??o,void 0,t,e),e.Provider=({store:e,storesById:t,metrics:o,metricsById:r,indexes:l,indexesById:u,relationships:d,relationshipsById:n,queries:i,queriesById:a,checkpoints:c,checkpointsById:I,children:C})=>{const w=s.useContext(f);return be(f.Provider,{value:Re((()=>[e??w[0],{...w[1],...t},o??w[2],{...w[3],...r},l??w[4],{...w[5],...u},d??w[6],{...w[7],...n},i??w[8],{...w[9],...a},c??w[10],{...w[11],...I}]),[e,t,o,r,l,u,d,n,i,a,c,I,w])},C)},e.RemoteRowView=({relationshipId:e,localRowId:s,relationships:t,rowComponent:o=Se,getRowComponentProps:r,debugIds:l})=>{const[u,d]=me(t),n=u?.getRemoteTableId(e),i=re(e,s,u);return Ve(g(n)||g(i)?null:be(o,{...pe(r,i),key:i,tableId:n,rowId:i,store:d,debugIds:l}),void 0,l,s)},e.ResultCellView=xe,e.ResultRowView=Pe,e.ResultSortedTableView=({cellId:e,descending:s,offset:t,limit:o,...r})=>ge(r,ne(r.queryId,e,s,t,o,r.queries)),e.ResultTableView=e=>ge(e,de(e.queryId,e.queries)),e.RowView=Se,e.SliceView=ve,e.SortedTableView=({cellId:e,descending:s,offset:t,limit:o,...r})=>ke(r,Y(r.tableId,e,s,t,o,r.store)),e.TableView=Te,e.TablesView=({store:e,tableComponent:s=Te,getTableComponentProps:t,separator:o,debugIds:r})=>Ve(V(W(e),(o=>be(s,{...pe(t,o),key:o,tableId:o,store:e,debugIds:r}))),o),e.ValueView=fe,e.ValuesView=({store:e,valueComponent:s=fe,getValueComponentProps:t,separator:o,debugIds:r})=>Ve(V(_(e),(o=>be(s,{...pe(t,o),key:o,valueId:o,store:e,debugIds:r}))),o),e.useAddRowCallback=(e,s,t=[],o,r=L,l=[],u=!0)=>{const d=q(o);return G((t=>m(d,(o=>m(s(t,o),(s=>r(o.addRow(e,s,u),o,s)))))),[d,e,...t,...l,u])},e.useCell=$,e.useCellIds=Z,e.useCellIdsListener=(e,s,t,o,r,l)=>H(b,q(l),t,o,[e,s],r),e.useCellListener=(e,s,t,o,r,l,u)=>H(w,q(u),o,r,[e,s,t],l),e.useCheckpoint=Ie,e.useCheckpointIds=ce,e.useCheckpointIdsListener=(e,s,t)=>H("CheckpointIds",F(t),e,s),e.useCheckpointListener=(e,s,t,o)=>H("Checkpoint",F(o),s,t,[e]),e.useCheckpoints=e=>v(e,10),e.useCheckpointsIds=()=>P(11),e.useCreateCheckpoints=(e,s,t)=>O(e,s,t),e.useCreateIndexes=(e,s,t)=>O(e,s,t),e.useCreateMetrics=(e,s,t)=>O(e,s,t),e.useCreatePersister=(e,s,t=[],o,r=[])=>{const[,l]=U(),u=j((()=>s(e)),[e,...t]);return Q((()=>((async()=>{await(o?.(u)),l(1)})(),()=>{u.destroy()})),[u,...r]),u},e.useCreateQueries=(e,s,t)=>O(e,s,t),e.useCreateRelationships=(e,s,t)=>O(e,s,t),e.useCreateStore=(e,s=[])=>j(e,s),e.useDelCellCallback=(e,s,t,o,r,l,u)=>K(r,w,l,u,e,s,t,o),e.useDelRowCallback=(e,s,t,o,r)=>K(t,a,o,r,e,s),e.useDelTableCallback=(e,s,t,o)=>K(s,d,t,o,e),e.useDelTablesCallback=(e,s,t)=>K(e,n,s,t),e.useDelValueCallback=(e,s,t,o)=>K(s,p,t,o,e),e.useDelValuesCallback=(e,s,t)=>K(e,R,s,t),e.useGoBackwardCallback=Ce,e.useGoForwardCallback=we,e.useGoToCallback=(e,s=[],t,o=L,r=[])=>{const l=F(t);return G((s=>m(l,(t=>m(e(s),(e=>o(t.goTo(e),e)))))),[l,...s,...r])},e.useIndexes=e=>v(e,4),e.useIndexesIds=()=>P(5),e.useLinkedRowIds=ue,e.useLinkedRowIdsListener=(e,s,t,o,r)=>H("Linked"+I,D(r),t,o,[e,s]),e.useLocalRowIds=le,e.useLocalRowIdsListener=(e,s,t,o,r)=>H("Local"+I,D(r),t,o,[e,s]),e.useMetric=se,e.useMetricListener=(e,s,t,o)=>H("Metric",B(o),s,t,[e]),e.useMetrics=e=>v(e,2),e.useMetricsIds=()=>P(3),e.useQueries=e=>v(e,8),e.useQueriesIds=()=>P(9),e.useRedoInformation=e=>{const s=F(e),[,,[t]]=ce(s);return[!g(t),we(s),t,m(t,(e=>s?.getCheckpoint(e)))??o]},e.useRelationships=e=>v(e,6),e.useRelationshipsIds=()=>P(7),e.useRemoteRowId=re,e.useRemoteRowIdListener=(e,s,t,o,r)=>H("RemoteRowId",D(r),t,o,[e,s]),e.useResultCell=ae,e.useResultCellIds=ie,e.useResultCellIdsListener=(e,s,t,o,r)=>H(l+b,A(r),t,o,[e,s]),e.useResultCellListener=(e,s,t,o,r,u)=>H(l+w,A(u),o,r,[e,s,t]),e.useResultRow=(e,s,t)=>z(l+a,A(t),{},[e,s]),e.useResultRowCount=(e,s)=>z(l+c,A(s),[],[e]),e.useResultRowCountListener=(e,s,t,o)=>H(l+c,A(o),s,t,[e]),e.useResultRowIds=de,e.useResultRowIdsListener=(e,s,t,o)=>H(l+I,A(o),s,t,[e]),e.useResultRowListener=(e,s,t,o,r)=>H(l+a,A(r),t,o,[e,s]),e.useResultSortedRowIds=ne,e.useResultSortedRowIdsListener=(e,s,t,o,r,u,d,n)=>H(l+C,A(n),u,d,[e,s,t,o,r]),e.useResultTable=(e,s)=>z(l+d,A(s),{},[e]),e.useResultTableCellIds=(e,s)=>z(l+d+b,A(s),[],[e]),e.useResultTableCellIdsListener=(e,s,t,o)=>H(l+d+b,A(o),s,t,[e]),e.useResultTableListener=(e,s,t,o)=>H(l+d,A(o),s,t,[e]),e.useRow=(e,s,t)=>z(a,q(t),{},[e,s]),e.useRowCount=(e,s)=>z(c,q(s),[],[e]),e.useRowCountListener=(e,s,t,o,r)=>H(c,q(r),s,t,[e],o),e.useRowIds=X,e.useRowIdsListener=(e,s,t,o,r)=>H(I,q(r),s,t,[e],o),e.useRowListener=(e,s,t,o,r,l)=>H(a,q(l),t,o,[e,s],r),e.useSetCellCallback=(e,s,t,o,r,l,u,d)=>J(l,w,o,r,u,d,e,s,t),e.useSetCheckpointCallback=(e=L,s=[],t,o=L,r=[])=>{const l=F(t);return G((s=>m(l,(t=>{const r=e(s);o(t.addCheckpoint(r),t,r)}))),[l,...s,...r])},e.useSetPartialRowCallback=(e,s,t,o,r,l,u)=>J(r,"PartialRow",t,o,l,u,e,s),e.useSetPartialValuesCallback=(e,s,t,o,r)=>J(t,"PartialValues",e,s,o,r),e.useSetRowCallback=(e,s,t,o,r,l,u)=>J(r,a,t,o,l,u,e,s),e.useSetTableCallback=(e,s,t,o,r,l)=>J(o,d,s,t,r,l,e),e.useSetTablesCallback=(e,s,t,o,r)=>J(t,n,e,s,o,r),e.useSetValueCallback=(e,s,t,o,r,l)=>J(o,p,s,t,r,l,e),e.useSetValuesCallback=(e,s,t,o,r)=>J(t,R,e,s,o,r),e.useSliceIds=te,e.useSliceIdsListener=(e,s,t,o)=>H("SliceIds",M(o),s,t,[e]),e.useSliceRowIds=oe,e.useSliceRowIdsListener=(e,s,t,o,r)=>H("Slice"+I,M(r),t,o,[e,s]),e.useSortedRowIds=Y,e.useSortedRowIdsListener=(e,s,t,o,r,l,u,d,n)=>H(C,q(n),l,u,[e,s,t,o,r],d),e.useStore=e=>v(e,0),e.useStoreIds=()=>P(1),e.useTable=(e,s)=>z(d,q(s),{},[e]),e.useTableCellIds=(e,s)=>z(d+b,q(s),[],[e]),e.useTableCellIdsListener=(e,s,t,o,r)=>H(d+b,q(r),s,t,[e],o),e.useTableIds=W,e.useTableIdsListener=(e,s,t,o)=>H(i,q(o),e,s,[],t),e.useTableListener=(e,s,t,o,r)=>H(d,q(r),s,t,[e],o),e.useTables=e=>z(n,q(e),{}),e.useTablesListener=(e,s,t,o)=>H(n,q(o),e,s,[],t),e.useUndoInformation=e=>{const s=F(e),[t,r]=ce(s);return[(l=t,!(0==(e=>e.length)(l))),Ce(s),r,m(r,(e=>s?.getCheckpoint(e)))??o];var l},e.useValue=ee,e.useValueIds=_,e.useValueIdsListener=(e,s,t,o)=>H(k,q(o),e,s,[],t),e.useValueListener=(e,s,t,o,r)=>H(p,q(r),s,t,[e],o),e.useValues=e=>z(R,q(e),{}),e.useValuesListener=(e,s,t,o)=>H(R,q(o),e,s,[],t)},"object"==typeof exports&&"undefined"!=typeof module?s(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],s):s((e="undefined"!=typeof globalThis?globalThis:e||self).TinyBaseUiReact={},e.React);
