var e,s;e=this,s=function(e,s){"use strict";const t=e=>typeof e,o="",l=t(o),d="Ids",r="Table",u=r+"s",n=r+d,i="Row",a=i+d,I="Sorted"+i+d,c="Cell",C=c+d,R="Value",w=R+"s",b=R+d,p=(e,s)=>e.map(s),k=e=>null==e,g=(e,s,t)=>k(e)?t?.():s(e),m=e=>t(e)==l,h=()=>{},{createContext:L,useContext:V}=s,y=L([]),T=(e,s)=>{const t=V(y);return k(e)?t[s]:m(e)?((e,s)=>g(e,(e=>e[s])))(t[s+1],e):e},S=(e,s)=>{const t=T(e,s);return k(e)||m(e)?t:e},f=(e,...s)=>k(e)?{}:e(...s),v=e=>S(e,0),P=e=>S(e,2),q=e=>S(e,4),x=e=>S(e,6),B=e=>S(e,8),M=e=>S(e,10),{useCallback:D,useEffect:A,useMemo:F,useRef:G,useState:E}=s,Q=(e,s,t=[])=>{const o=F((()=>s(e)),[e,...t]);return A((()=>()=>o.destroy()),[o]),o},U=(e,s,t,o=[],l)=>{const[,d]=E(),r=D((()=>s?.["get"+e]?.(...o)??t),[s,...o]),[u]=E(r),n=G(u);return F((()=>n.current=r()),[r]),j(e,s,((...e)=>{n.current=k(l)?r():e[l],d([])}),[],o),n.current},j=(e,s,t,o=[],l=[],...d)=>A((()=>{const o=s?.["add"+e+"Listener"]?.(...l,t,...d);return()=>s?.delListener(o)}),[s,...l,...o,...d]),z=(e,s,t,o=[],l=h,d=[],...r)=>{const u=v(e);return D((e=>g(u,(o=>g(t(e,o),(e=>l(o["set"+s](...r,e),e)))))),[u,s,...o,...d,...r])},H=(e,s,t=h,o=[],...l)=>{const d=v(e);return D((()=>t(d?.["del"+s](...l))),[d,s,...o,...l])},J=(e,s,t)=>{const o=M(e);return D((()=>o?.[s](t)),[o,s,t])},K=e=>U(n,v(e),[],[]),N=(e,s)=>U(a,v(s),[],[e]),O=(e,s,t,o=0,l,d)=>U(I,v(d),[],[e,s,t,o,l],6),W=(e,s,t)=>U(C,v(t),[],[e,s]),X=(e,s,t,o)=>U(c,v(o),void 0,[e,s,t],4),Y=e=>U(b,v(e),[],[]),Z=(e,s)=>U(R,v(s),void 0,[e]),$=(e,s)=>U("Metric",P(s),void 0,[e]),_=(e,s)=>U("SliceIds",q(s),[],[e]),ee=(e,s,t)=>U("SliceRowIds",q(t),[],[e,s]),se=(e,s,t)=>U("RemoteRowId",x(t),void 0,[e,s]),te=(e,s,t)=>U("LocalRowIds",x(t),[],[e,s]),oe=(e,s,t)=>U("LinkedRowIds",x(t),[],[e,s]),le=(e,s)=>U("ResultRowIds",B(s),[],[e]),de=(e,s,t,o=0,l,d)=>U("ResultSortedRowIds",B(d),[],[e,s,t,o,l],6),re=(e,s,t)=>U("ResultCellIds",B(t),[],[e,s]),ue=(e,s,t,o)=>U("ResultCell",B(o),void 0,[e,s,t]),ne=e=>U("CheckpointIds",M(e),[[],void 0,[]]),ie=(e,s)=>U("Checkpoint",M(s),void 0,[e]),ae=e=>J(e,"goBackward"),Ie=e=>J(e,"goForward"),{createElement:ce,useMemo:Ce}=s,Re=({tableId:e,store:s,rowComponent:t=he,getRowComponentProps:o,customCellIds:l,separator:d,debugIds:r},u)=>ge(p(u,(d=>ce(t,{...f(o,d),key:d,tableId:e,rowId:d,customCellIds:l,store:s,debugIds:r}))),d,r,e),we=({queryId:e,queries:s,resultRowComponent:t=Se,getResultRowComponentProps:o,separator:l,debugIds:d},r)=>ge(p(r,(l=>ce(t,{...f(o,l),key:l,queryId:e,rowId:l,queries:s,debugIds:d}))),l,d,e),be=e=>{const s=x(e);return[s,s?.getStore()]},pe=({relationshipId:e,relationships:s,rowComponent:t=he,getRowComponentProps:o,separator:l,debugIds:d},r,u)=>{const[n,i]=be(s),a=n?.getLocalTableId(e),I=r(e,u,n);return ge(p(I,(e=>ce(t,{...f(o,e),key:e,tableId:a,rowId:e,store:i,debugIds:d}))),l,d,u)},ke=e=>({checkpoints:s,checkpointComponent:t=fe,getCheckpointComponentProps:o,separator:l,debugIds:d})=>{const r=M(s);return ge(p(e(ne(r)),(e=>ce(t,{...f(o,e),key:e,checkpoints:r,checkpointId:e,debugIds:d}))),l)},ge=(e,s,t,o)=>{const l=k(s)||!Array.isArray(e)?e:p(e,((e,t)=>t>0?[s,e]:e));return t?[o,":{",l,"}"]:l},me=({tableId:e,rowId:s,cellId:t,store:l,debugIds:d})=>ge(o+(X(e,s,t,l)??o),void 0,d,t),he=({tableId:e,rowId:s,store:t,cellComponent:o=me,getCellComponentProps:l,customCellIds:d,separator:r,debugIds:u})=>ge(p(((e,s,t,o)=>{const l=W(s,t,o);return e??l})(d,e,s,t),(d=>ce(o,{...f(l,d),key:d,tableId:e,rowId:s,cellId:d,store:t,debugIds:u}))),r,u,s),Le=e=>Re(e,N(e.tableId,e.store)),Ve=({valueId:e,store:s,debugIds:t})=>ge(o+(Z(e,s)??o),void 0,t,e),ye=({indexId:e,sliceId:s,indexes:t,rowComponent:o=he,getRowComponentProps:l,separator:d,debugIds:r})=>{const u=q(t),n=u?.getStore(),i=u?.getTableId(e),a=ee(e,s,u);return ge(p(a,(e=>ce(o,{...f(l,e),key:e,tableId:i,rowId:e,store:n,debugIds:r}))),d,r,s)},Te=({queryId:e,rowId:s,cellId:t,queries:l,debugIds:d})=>ge(o+(ue(e,s,t,l)??o),void 0,d,t),Se=({queryId:e,rowId:s,queries:t,resultCellComponent:o=Te,getResultCellComponentProps:l,separator:d,debugIds:r})=>ge(p(re(e,s,t),(d=>ce(o,{...f(l,d),key:d,queryId:e,rowId:s,cellId:d,queries:t,debugIds:r}))),d,r,s),fe=({checkpoints:e,checkpointId:s,debugIds:t})=>ge(ie(s,e)??o,void 0,t,s),ve=ke((e=>e[0])),Pe=ke((e=>k(e[1])?[]:[e[1]])),qe=ke((e=>e[2]));e.BackwardCheckpointsView=ve,e.CellView=me,e.CheckpointView=fe,e.CurrentCheckpointView=Pe,e.ForwardCheckpointsView=qe,e.IndexView=({indexId:e,indexes:s,sliceComponent:t=ye,getSliceComponentProps:o,separator:l,debugIds:d})=>ge(p(_(e,s),(l=>ce(t,{...f(o,l),key:l,indexId:e,sliceId:l,indexes:s,debugIds:d}))),l,d,e),e.LinkedRowsView=e=>pe(e,oe,e.firstRowId),e.LocalRowsView=e=>pe(e,te,e.remoteRowId),e.MetricView=({metricId:e,metrics:s,debugIds:t})=>ge($(e,s)??o,void 0,t,e),e.Provider=({store:e,storesById:t,metrics:o,metricsById:l,indexes:d,indexesById:r,relationships:u,relationshipsById:n,queries:i,queriesById:a,checkpoints:I,checkpointsById:c,children:C})=>{const R=s.useContext(y);return ce(y.Provider,{value:Ce((()=>[e??R[0],{...R[1],...t},o??R[2],{...R[3],...l},d??R[4],{...R[5],...r},u??R[6],{...R[7],...n},i??R[8],{...R[9],...a},I??R[10],{...R[11],...c}]),[e,t,o,l,d,r,u,n,i,a,I,c,R])},C)},e.RemoteRowView=({relationshipId:e,localRowId:s,relationships:t,rowComponent:o=he,getRowComponentProps:l,debugIds:d})=>{const[r,u]=be(t),n=r?.getRemoteTableId(e),i=se(e,s,r);return ge(k(n)||k(i)?null:ce(o,{...f(l,i),key:i,tableId:n,rowId:i,store:u,debugIds:d}),void 0,d,s)},e.ResultCellView=Te,e.ResultRowView=Se,e.ResultSortedTableView=({cellId:e,descending:s,offset:t,limit:o,...l})=>we(l,de(l.queryId,e,s,t,o,l.queries)),e.ResultTableView=e=>we(e,le(e.queryId,e.queries)),e.RowView=he,e.SliceView=ye,e.SortedTableView=({cellId:e,descending:s,offset:t,limit:o,...l})=>Re(l,O(l.tableId,e,s,t,o,l.store)),e.TableView=Le,e.TablesView=({store:e,tableComponent:s=Le,getTableComponentProps:t,separator:o,debugIds:l})=>ge(p(K(e),(o=>ce(s,{...f(t,o),key:o,tableId:o,store:e,debugIds:l}))),o),e.ValueView=Ve,e.ValuesView=({store:e,valueComponent:s=Ve,getValueComponentProps:t,separator:o,debugIds:l})=>ge(p(Y(e),(o=>ce(s,{...f(t,o),key:o,valueId:o,store:e,debugIds:l}))),o),e.useAddRowCallback=(e,s,t=[],o,l=h,d=[],r=!0)=>{const u=v(o);return D((t=>g(u,(o=>g(s(t,o),(s=>l(o.addRow(e,s,r),o,s)))))),[u,e,...t,...d,r])},e.useCell=X,e.useCellIds=W,e.useCellIdsListener=(e,s,t,o,l,d)=>j(C,v(d),t,o,[e,s],l),e.useCellListener=(e,s,t,o,l,d,r)=>j(c,v(r),o,l,[e,s,t],d),e.useCheckpoint=ie,e.useCheckpointIds=ne,e.useCheckpointIdsListener=(e,s,t)=>j("CheckpointIds",M(t),e,s),e.useCheckpointListener=(e,s,t,o)=>j("Checkpoint",M(o),s,t,[e]),e.useCheckpoints=e=>T(e,10),e.useCreateCheckpoints=(e,s,t)=>Q(e,s,t),e.useCreateIndexes=(e,s,t)=>Q(e,s,t),e.useCreateMetrics=(e,s,t)=>Q(e,s,t),e.useCreatePersister=(e,s,t=[],o,l=[])=>{const[,d]=E(),r=F((()=>s(e)),[e,...t]);return A((()=>((async()=>{await(o?.(r)),d(1)})(),()=>{r.destroy()})),[r,...l]),r},e.useCreateQueries=(e,s,t)=>Q(e,s,t),e.useCreateRelationships=(e,s,t)=>Q(e,s,t),e.useCreateStore=(e,s=[])=>F(e,s),e.useDelCellCallback=(e,s,t,o,l,d,r)=>H(l,c,d,r,e,s,t,o),e.useDelRowCallback=(e,s,t,o,l)=>H(t,i,o,l,e,s),e.useDelTableCallback=(e,s,t,o)=>H(s,r,t,o,e),e.useDelTablesCallback=(e,s,t)=>H(e,u,s,t),e.useDelValueCallback=(e,s,t,o)=>H(s,R,t,o,e),e.useDelValuesCallback=(e,s,t)=>H(e,w,s,t),e.useGoBackwardCallback=ae,e.useGoForwardCallback=Ie,e.useGoToCallback=(e,s=[],t,o=h,l=[])=>{const d=M(t);return D((s=>g(d,(t=>g(e(s),(e=>o(t.goTo(e),e)))))),[d,...s,...l])},e.useIndexes=e=>T(e,4),e.useLinkedRowIds=oe,e.useLinkedRowIdsListener=(e,s,t,o,l)=>j("LinkedRowIds",x(l),t,o,[e,s]),e.useLocalRowIds=te,e.useLocalRowIdsListener=(e,s,t,o,l)=>j("LocalRowIds",x(l),t,o,[e,s]),e.useMetric=$,e.useMetricListener=(e,s,t,o)=>j("Metric",P(o),s,t,[e]),e.useMetrics=e=>T(e,2),e.useQueries=e=>T(e,8),e.useRedoInformation=e=>{const s=M(e),[,,[t]]=ne(s);return[!k(t),Ie(s),t,g(t,(e=>s?.getCheckpoint(e)))??o]},e.useRelationships=e=>T(e,6),e.useRemoteRowId=se,e.useRemoteRowIdListener=(e,s,t,o,l)=>j("RemoteRowId",x(l),t,o,[e,s]),e.useResultCell=ue,e.useResultCellIds=re,e.useResultCellIdsListener=(e,s,t,o,l)=>j("ResultCellIds",B(l),t,o,[e,s]),e.useResultCellListener=(e,s,t,o,l,d)=>j("ResultCell",B(d),o,l,[e,s,t]),e.useResultRow=(e,s,t)=>U("ResultRow",B(t),{},[e,s]),e.useResultRowIds=le,e.useResultRowIdsListener=(e,s,t,o)=>j("ResultRowIds",B(o),s,t,[e]),e.useResultRowListener=(e,s,t,o,l)=>j("ResultRow",B(l),t,o,[e,s]),e.useResultSortedRowIds=de,e.useResultSortedRowIdsListener=(e,s,t,o,l,d,r,u)=>j("ResultSortedRowIds",B(u),d,r,[e,s,t,o,l]),e.useResultTable=(e,s)=>U("ResultTable",B(s),{},[e]),e.useResultTableCellIds=(e,s)=>U("ResultTableCellIds",B(s),[],[e]),e.useResultTableCellIdsListener=(e,s,t,o)=>j("ResultTableCellIds",B(o),s,t,[e]),e.useResultTableListener=(e,s,t,o)=>j("ResultTable",B(o),s,t,[e]),e.useRow=(e,s,t)=>U(i,v(t),{},[e,s]),e.useRowIds=N,e.useRowIdsListener=(e,s,t,o,l)=>j(a,v(l),s,t,[e],o),e.useRowListener=(e,s,t,o,l,d)=>j(i,v(d),t,o,[e,s],l),e.useSetCellCallback=(e,s,t,o,l,d,r,u)=>z(d,c,o,l,r,u,e,s,t),e.useSetCheckpointCallback=(e=h,s=[],t,o=h,l=[])=>{const d=M(t);return D((s=>g(d,(t=>{const l=e(s);o(t.addCheckpoint(l),t,l)}))),[d,...s,...l])},e.useSetPartialRowCallback=(e,s,t,o,l,d,r)=>z(l,"PartialRow",t,o,d,r,e,s),e.useSetPartialValuesCallback=(e,s,t,o,l)=>z(t,"PartialValues",e,s,o,l),e.useSetRowCallback=(e,s,t,o,l,d,r)=>z(l,i,t,o,d,r,e,s),e.useSetTableCallback=(e,s,t,o,l,d)=>z(o,r,s,t,l,d,e),e.useSetTablesCallback=(e,s,t,o,l)=>z(t,u,e,s,o,l),e.useSetValueCallback=(e,s,t,o,l,d)=>z(o,R,s,t,l,d,e),e.useSetValuesCallback=(e,s,t,o,l)=>z(t,w,e,s,o,l),e.useSliceIds=_,e.useSliceIdsListener=(e,s,t,o)=>j("SliceIds",q(o),s,t,[e]),e.useSliceRowIds=ee,e.useSliceRowIdsListener=(e,s,t,o,l)=>j("SliceRowIds",q(l),t,o,[e,s]),e.useSortedRowIds=O,e.useSortedRowIdsListener=(e,s,t,o,l,d,r,u,n)=>j(I,v(n),d,r,[e,s,t,o,l],u),e.useStore=e=>T(e,0),e.useTable=(e,s)=>U(r,v(s),{},[e]),e.useTableCellIds=(e,s)=>U(r+C,v(s),[],[e]),e.useTableCellIdsListener=(e,s,t,o,l)=>j(r+C,v(l),s,t,[e],o),e.useTableIds=K,e.useTableIdsListener=(e,s,t,o)=>j(n,v(o),e,s,[],t),e.useTableListener=(e,s,t,o,l)=>j(r,v(l),s,t,[e],o),e.useTables=e=>U(u,v(e),{}),e.useTablesListener=(e,s,t,o)=>j(u,v(o),e,s,[],t),e.useUndoInformation=e=>{const s=M(e),[t,l]=ne(s);return[(d=t,!(0==(e=>e.length)(d))),ae(s),l,g(l,(e=>s?.getCheckpoint(e)))??o];var d},e.useValue=Z,e.useValueIds=Y,e.useValueIdsListener=(e,s,t,o)=>j(b,v(o),e,s,[],t),e.useValueListener=(e,s,t,o,l)=>j(R,v(l),s,t,[e],o),e.useValues=e=>U(w,v(e),{}),e.useValuesListener=(e,s,t,o)=>j(w,v(o),e,s,[],t)},"object"==typeof exports&&"undefined"!=typeof module?s(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],s):s((e="undefined"!=typeof globalThis?globalThis:e||self).TinyBaseUiReact={},e.React);
