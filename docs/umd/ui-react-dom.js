var e,t;e=this,t=function(e,t,l){"use strict";const a=e=>typeof e,n=a(""),o=a(!0),r=a(0),i="Value",s="currentTarget",d="value",u=isFinite,m=e=>null==e,{createElement:c,Fragment:h,useCallback:b,useRef:g,useState:p}=t,f=(e,...t)=>m(e)?{}:e(...t),w=(e,t)=>e.map(t),I=Object,C=(e=[])=>I.fromEntries(e),y=(e,t)=>w(I.entries(e),(([e,l])=>t(l,e))),k="tinybaseStoreInspector",v="M20 80l5-15l40-40l10 10l-40 40l-15 5m5-15l10 10",x='content:url("',R=x+"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' stroke-width='4' stroke='white' fill='none'>",T='</svg>")',N=x+"data:image/svg+xml,%3csvg viewBox='0 0 680 680' xmlns='http://www.w3.org/2000/svg' style='width:680px%3bheight:680px'%3e %3cpath stroke='white' stroke-width='80' fill='none' d='M340 617a84 241 90 11.01 0zM131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124zm-12-127a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e %3cpath fill='%23d81b60' d='M131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124z' /%3e %3cpath d='M249 619a94 240 90 00308-128 114 289 70 01-308 128zM119 208a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e%3c/svg%3e\")",V=w([[20,20,20,60],[20,20,60,20],[20,60,60,20],[60,20,20,60],[30,30,40,40]],(([e,t,l,a])=>R+`<rect x='20' y='20' width='60' height='60' fill='grey'/><rect x='${e}' y='${t}' width='${l}' height='${a}' fill='white'/>`+T)),z=R+"<path d='M20 20l60 60M20 80l60-60' />"+T,S=R+`<path d='${v}' />`+T,$=R+`<path d='${v}M20 20l60 60' />`+T,M="*::-webkit-scrollbar";((e,t="")=>{e.join(t)})(y({"":"all:initial;font-family:sans-serif;font-size:0.75rem;position:fixed;z-index:999999","*":"all:revert","*::before":"all:revert","*::after":"all:revert",[M]:"width:0.5rem;height:0.5rem;",[M+"-track"]:"background:#111",[M+"-thumb"]:"background:#999;border:1px solid #111",[M+"-thumb:hover"]:"background:#fff",[M+"-corner"]:"background:#111",img:"width:1rem;height:1rem;background:#111;border:0;vertical-align:text-bottom",">img":"padding:0.25rem;bottom:0;right:0;position:fixed;"+N,...C(w(["bottom:0;left:0","top:0;right:0"],((e,t)=>[`>img[data-position='${t}']`,e]))),main:"display:flex;flex-direction:column;background:#111d;color:#fff;position:fixed;",...C(w(["bottom:0;left:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:30vh","bottom:0;left:0;width:100vw;height:30vh","top:0;right:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:100vh"],((e,t)=>[`main[data-position='${t}']`,e]))),header:"display:flex;padding:0.25rem;background:#000;align-items:center","header>img:nth-of-type(1)":N,"header>img:nth-of-type(6)":z,...C(w(V,((e,t)=>[`header>img[data-id='${t}']`,e]))),"header>span":"flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-left:0.25rem",article:"padding:0.25rem 0.25rem 0.25rem 0.5rem;overflow:auto;flex:1",details:"margin-left:0.75rem;width:fit-content;","details img":"display:none","details[open]>summary img":"display:unset;background:none;margin-left:0.25rem","details[open]>summary img.edit":S,"details[open]>summary img.done":$,summary:"margin-left:-0.75rem;line-height:1.25rem;user-select:none;width:fit-content",table:"border-collapse:collapse;table-layout:fixed;margin-bottom:0.5rem","table input":"background:#111;color:unset;padding:0 0.25rem;border:0;font-size:unset;vertical-align:top;margin:0",'table input[type="number"]':"width:4rem","table tbody button":"font-size:0;background:#fff;border-radius:50%;margin:0 0.125rem 0 0;width:0.85rem;color:#111","table button:first-letter":"font-size:0.75rem",thead:"background:#222","th:nth-of-type(1)":"min-width:2rem;","th.sorted":"background:#000","table caption":"text-align:left;white-space:nowrap;line-height:1.25rem",button:"width:1.5rem;border:none;background:none;color:#fff;padding:0","button[disabled]":"color:#777","button.next":"margin-right:0.5rem",[`th,#${k} td`]:"overflow:hidden;text-overflow:ellipsis;padding:0.25rem 0.5rem;max-width:12rem;white-space:nowrap;border-width:1px 0;border-style:solid;border-color:#777;text-align:left"},((e,t)=>e?`#${k} ${t}{${e}}`:"")));const q=(e,t,l,a)=>e==n?t:e==r?l:a,{useCallback:H,useMemo:B,useState:F}=t,O="editable",E=(e,t)=>w(l.useTableCellIds(e,t),(t=>e+"."+t)),P=(e,t,l)=>{const a=H(e,t);return l?a:void 0},j=(...e)=>B((()=>e),e),A=(e,t)=>B((()=>({store:e,tableId:t})),[e,t]),U=(e,t)=>B((()=>({queries:e,queryId:t})),[e,t]),D=(e,t=!1,l,a=0,n,o,r,i)=>{const[[s,d,u],m]=F([e,t,a]),h=H((e=>{m(e),i?.(e)}),[i]),b=P((e=>h([e,e==s&&!d,u])),[h,s,d,u],l),g=H((e=>h([s,d,e])),[h,s,d]),p=!0===r?Y:r;return[[s,d,u],b,B((()=>!1===r?null:c(p,{offset:u,limit:n,total:o,onChange:g})),[r,p,u,n,o,g])]},L=(e,t,l)=>B((()=>{const o=t??e;return C(y(Array.isArray(o)?C(w(o,(e=>[e,e]))):o,((e,t)=>{return[t,{label:t,component:l,...(o=e,a(o)==n?{label:e}:e)}];var o})))}),[t,l,e]),G=({className:e,headerRow:t,idColumn:l,params:[a,n,o,r,i,s]})=>c("table",{className:e},s?c("caption",null,s):null,!1===t?null:c("thead",null,c("tr",null,!1===l?null:c(J,{sort:r??[],label:"Id",onClick:i}),y(a,(({label:e},t)=>c(J,{key:t,cellId:t,label:e,sort:r??[],onClick:i}))))),c("tbody",null,w(o,(e=>c("tr",{key:e},!1===l?null:c("th",null,e),y(a,(({component:t,getComponentProps:l},a)=>c("td",{key:a},c(t,{...f(l,e,a),...n,rowId:e,cellId:a}))))))))),J=({cellId:e,sort:[t,l],label:a=e??"",onClick:n})=>c("th",{onClick:P((()=>n?.(e)),[n,e],n),className:m(l)||t!=e?void 0:`sorted ${l?"de":"a"}scending`},m(l)||t!=e?null:(l?"↓":"↑")+" ",a),K=({localRowId:e,params:[a,n,o,r,i,s,d]})=>{const u=l.useRemoteRowId(i,e,s);return c("tr",null,!1===a?null:c(t.Fragment,null,c("th",null,e),c("th",null,u)),y(n,(({component:t,getComponentProps:l},a)=>{const[n,i]=a.split(".",2),s=n===o?e:n===r?u:null;return m(s)?null:c("td",{key:a},c(t,{...f(l,s,i),store:d,tableId:n,rowId:s,cellId:i}))})))},Q=({thing:e,onThingChange:t,className:l})=>{const[i,m]=F(),[h,b]=F(),[g,p]=F(),[f,w]=F(),[I,C]=F();h!==e&&(m((e=>{const t=a(e);return(e=>e==n||e==o)(t)||t==r&&u(e)?t:void 0})(e)),b(e),p(e+""),w(Number(e)||0),C(!!e));const y=H(((e,l)=>{l(e),b(e),t(e)}),[t]);return c("div",{className:l},c("button",{className:i,onClick:H((()=>{const e=q(i,r,o,n),l=q(e,g,f,I);m(e),b(l),t(l)}),[t,g,f,I,i])},i),q(i,c("input",{key:i,value:g,onChange:H((e=>y(e[s][d]+"",p)),[y])}),c("input",{key:i,type:"number",value:f,onChange:H((e=>y(Number(e[s][d]||0),w)),[y])}),c("input",{key:i,type:"checkbox",checked:I,onChange:H((e=>y(!!e[s].checked,C)),[y])})))},W=({tableId:e,rowId:t,cellId:a,store:n,className:o})=>c(Q,{thing:l.useCell(e,t,a,n),onThingChange:l.useSetCellCallback(e,t,a,(e=>e),[],n),className:o??O+"Cell"}),X=({valueId:e,store:t,className:a})=>c(Q,{thing:l.useValue(e,t),onThingChange:l.useSetValueCallback(e,(e=>e),[],t),className:a??O+i}),Y=({onChange:e,total:l,offset:a=0,limit:n=l,singular:o="row",plural:r=o+"s"})=>{(a>l||a<0)&&(a=0,e(0));const i=P((()=>e(a-n)),[e,a,n],a>0),s=P((()=>e(a+n)),[e,a,n],a+n<l);return c(t.Fragment,null,l>n&&c(t.Fragment,null,c("button",{className:"previous",disabled:0==a,onClick:i},"←"),c("button",{className:"next",disabled:a+n>=l,onClick:s},"→"),a+1," to ",Math.min(l,a+n)," of "),l," ",1!=l?r:o)},Z=e=>new Map(e);Z(),Z(),e.EditableCellView=W,e.EditableValueView=X,e.RelationshipInHtmlTable=({relationshipId:e,relationships:a,editable:n,customCells:o,className:r,headerRow:i,idColumn:s=!0})=>{const[d,u,m,h]=((e,t)=>[e,e?.getStore(),e?.getLocalTableId(t),e?.getRemoteTableId(t)])(l.useRelationshipsOrRelationshipsById(a),e),b=L([...E(m,u),...E(h,u)],o,n?W:l.CellView),g=j(s,b,m,h,e,d,u);return c("table",{className:r},!1===i?null:c("thead",null,c("tr",null,!1===s?null:c(t.Fragment,null,c("th",null,m,".Id"),c("th",null,h,".Id")),y(b,(({label:e},t)=>c("th",{key:t},e))))),c("tbody",null,w(l.useRowIds(m,u),(e=>c(K,{key:e,localRowId:e,params:g})))))},e.ResultSortedTableInHtmlTable=({queryId:e,cellId:t,descending:a,offset:n,limit:o,queries:r,sortOnClick:i,paginator:s=!1,customCells:d,onChange:u,...m})=>{const[h,b,g]=D(t,a,i,n,o,l.useResultRowCount(e,r),s,u);return c(G,{...m,params:j(L(l.useResultTableCellIds(e,r),d,l.ResultCellView),U(r,e),l.useResultSortedRowIds(e,...h,o,r),h,b,g)})},e.ResultTableInHtmlTable=({queryId:e,queries:t,customCells:a,...n})=>c(G,{...n,params:j(L(l.useResultTableCellIds(e,t),a,l.ResultCellView),U(t,e),l.useResultRowIds(e,t))}),e.SliceInHtmlTable=({indexId:e,sliceId:t,indexes:a,editable:n,customCells:o,...r})=>{const[i,s,d]=((e,t)=>[e,e?.getStore(),e?.getTableId(t)])(l.useIndexesOrIndexesById(a),e);return c(G,{...r,params:j(L(l.useTableCellIds(d,s),o,n?W:l.CellView),A(s,d),l.useSliceRowIds(e,t,i))})},e.SortedTableInHtmlTable=({tableId:e,cellId:t,descending:a,offset:n,limit:o,store:r,editable:i,sortOnClick:s,paginator:d=!1,onChange:u,customCells:m,...h})=>{const[b,g,p]=D(t,a,s,n,o,l.useRowCount(e,r),d,u);return c(G,{...h,params:j(L(l.useTableCellIds(e,r),m,i?W:l.CellView),A(r,e),l.useSortedRowIds(e,...b,o,r),b,g,p)})},e.SortedTablePaginator=Y,e.StoreInspector=e=>null,e.TableInHtmlTable=({tableId:e,store:t,editable:a,customCells:n,...o})=>c(G,{...o,params:j(L(l.useTableCellIds(e,t),n,a?W:l.CellView),A(t,e),l.useRowIds(e,t))}),e.ValuesInHtmlTable=({store:e,editable:t=!1,valueComponent:a=(t?X:l.ValueView),getValueComponentProps:n,className:o,headerRow:r,idColumn:s})=>c("table",{className:o},!1===r?null:c("thead",null,c("tr",null,!1===s?null:c("th",null,"Id"),c("th",null,i))),c("tbody",null,w(l.useValueIds(e),(t=>c("tr",{key:t},!1===s?null:c("th",null,t),c("td",null,c(a,{...f(n,t),valueId:t,store:e})))))))},"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("./ui-react")):"function"==typeof define&&define.amd?define(["exports","react","./ui-react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).TinyBaseUiReactDom={},e.React,e.TinyBaseUiReact);
