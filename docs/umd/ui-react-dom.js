var e,l;e=this,l=function(e,l,t){"use strict";const s=e=>typeof e,n=s(""),a=s(!0),o=s(0),u="Value",r="currentTarget",d="value",i=isFinite,c=e=>null==e,I=(e,l,t,s)=>e==n?l:e==o?t:s,C=(e,l)=>e.map(l),b=Object,m=(e=[])=>b.fromEntries(e),h=(e,l)=>C(b.entries(e),(([e,t])=>l(t,e))),{createContext:y,useContext:T}=t;y([]);const f=(e,...l)=>c(e)?{}:e(...l),{createElement:g,useCallback:p,useMemo:k,useState:w}=t,R="editable",V=(e,l,t)=>{const s=p(e,l);return t?s:void 0},N=(e,l)=>c(e)||e[0]!=l?void 0:`sorted ${e[1]?"de":"a"}scending`,v=({cellId:e,sorting:l,label:t=e??"",onClick:s})=>g("th",{onClick:V((()=>s?.(e)),[s,e],!c(s)),className:N(l,e)},t),q=({className:e,headerRow:l,idColumn:t,customCells:a,storeTableIdOrQueriesQueryId:o,defaultCellComponent:u,rowIds:r,defaultCellIds:d,sorting:i,onHeaderThClick:c})=>{const I=k((()=>{const e=a??d;return m(h(Array.isArray(e)?m(C(e,(e=>[e,e]))):e,((e,l)=>{return[l,{label:l,...(t=e,s(t)==n?{label:e}:e)}];var t})))}),[a,d]);return g("table",{className:e},!1===l?null:g("thead",null,g("tr",null,!1===t?null:g(v,{sorting:i,label:"Id",onClick:c}),h(I,(({label:e},l)=>g(v,{key:l,cellId:l,label:e,sorting:i,onClick:c}))))),g("tbody",null,C(r,(e=>g("tr",{key:e},!1===t?null:g("th",null,e),h(I,(({component:l=u,getComponentProps:t},s)=>g("td",{key:s},g(l,{...f(t,e,s),...o,rowId:e,cellId:s})))))))))},Q=({thing:e,onThingChange:l,className:t})=>{const[u,c]=w(),[C,b]=w(),[m,h]=w(),[y,T]=w(),[f,k]=w();C!==e&&(c((e=>{const l=s(e);return(e=>e==n||e==a)(l)||l==o&&i(e)?l:void 0})(e)),b(e),h(e+""),T(Number(e)||0),k(!!e));const R=p(((e,t)=>{t(e),b(e),l(e)}),[l]);return g("div",{className:t},g("button",{type:"button",className:u,onClick:p((()=>{const e=I(u,o,a,n),t=I(e,m,y,f);c(e),b(t),l(t)}),[l,m,y,f,u])},u),I(u,g("input",{key:u,value:m,onChange:p((e=>R(e[r][d]+"",h)),[R])}),g("input",{key:u,type:"number",value:y,onChange:p((e=>R(Number(e[r][d]||0),T)),[R])}),g("input",{key:u,type:"checkbox",checked:f,onChange:p((e=>R(!!e[r].checked,k)),[R])})))},H=({tableId:e,rowId:t,cellId:s,store:n,className:a})=>g(Q,{thing:l.useCell(e,t,s,n),onThingChange:l.useSetCellCallback(e,t,s,(e=>e),[],n),className:a??R+"Cell"}),O=({valueId:e,store:t,className:s})=>g(Q,{thing:l.useValue(e,t),onThingChange:l.useSetValueCallback(e,(e=>e),[],t),className:s??R+u});e.EditableCellView=H,e.EditableValueView=O,e.ResultSortedTableInHtmlTable=({queryId:e,cellId:t,descending:s,offset:n,limit:a,queries:o,sortOnClick:u,...r})=>{const[d,i]=w([t,!!s]),c=V((e=>i([e,e==d[0]&&!d[1]])),[d],u);return g(q,{...r,storeTableIdOrQueriesQueryId:k((()=>({queries:o,queryId:e})),[o,e]),defaultCellComponent:l.ResultCellView,rowIds:l.useResultSortedRowIds(e,...d,n,a,o),defaultCellIds:l.useResultTableCellIds(e,o),sorting:d,onHeaderThClick:c})},e.ResultTableInHtmlTable=({queryId:e,queries:t,...s})=>g(q,{...s,storeTableIdOrQueriesQueryId:k((()=>({queries:t,queryId:e})),[t,e]),defaultCellComponent:l.ResultCellView,rowIds:l.useResultRowIds(e,t),defaultCellIds:l.useResultTableCellIds(e,t)}),e.SortedTableInHtmlTable=({tableId:e,cellId:t,descending:s,offset:n,limit:a,store:o,editable:u,sortOnClick:r,...d})=>{const[i,c]=w([t,!!s]),I=V((e=>c([e,e==i[0]&&!i[1]])),[i],r);return g(q,{...d,storeTableIdOrQueriesQueryId:k((()=>({store:o,tableId:e})),[o,e]),defaultCellComponent:u?H:l.CellView,rowIds:l.useSortedRowIds(e,...i,n,a,o),defaultCellIds:l.useTableCellIds(e,o),sorting:i,onHeaderThClick:I})},e.TableInHtmlTable=({tableId:e,store:t,editable:s,...n})=>g(q,{...n,storeTableIdOrQueriesQueryId:k((()=>({store:t,tableId:e})),[t,e]),defaultCellComponent:s?H:l.CellView,rowIds:l.useRowIds(e,t),defaultCellIds:l.useTableCellIds(e,t)}),e.ValuesInHtmlTable=({store:e,editable:t=!1,valueComponent:s=(t?O:l.ValueView),getValueComponentProps:n,className:a,headerRow:o,idColumn:r})=>g("table",{className:a},!1===o?null:g("thead",null,g("tr",null,!1===r?null:g("th",null,"Id"),g("th",null,u))),g("tbody",null,C(l.useValueIds(e),(l=>g("tr",{key:l},!1===r?null:g("th",null,l),g("td",null,g(s,{...f(n,l),valueId:l,store:e})))))))},"object"==typeof exports&&"undefined"!=typeof module?l(exports,require("./ui-react"),require("react")):"function"==typeof define&&define.amd?define(["exports","./ui-react","react"],l):l((e="undefined"!=typeof globalThis?globalThis:e||self).TinyBaseUiReactDom={},e.TinyBaseUiReact,e.React);
