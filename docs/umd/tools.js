var e,t;e=this,t=function(e){"use strict";const t=e=>typeof e,l="",a=t(l),o=t(!0),n=t(0),r="type",s="default",d="Listener",c="get",$="add",i="Ids",u="Table",I=u+"s",p=u+i,b="Row",h=b+i,m="Sorted"+b+i,C="Cell",g=C+i,w="Value",f=w+"s",y=w+i,v=(e,t)=>e.every(t),R=(e,t)=>e.sort(t),V=(e,t)=>e.forEach(t),k=(e,t)=>e.map(t),S=e=>e.length,x=e=>0==S(e),P=(e,t)=>e.filter(t),T=(e,...t)=>e.push(...t),E=e=>e.pop(),D=(e,...t)=>e.unshift(...t),O=e=>e.shift(),A=JSON.parse,N=isFinite,j=(e,t)=>e instanceof t,M=e=>null==e,z=e=>e==a||e==o,G=e=>t(e)==a,J=e=>Array.isArray(e),W=e=>{const l=t(e);return z(l)||l==n&&N(e)?l:void 0},B=(e,t)=>e?.has(t)??!1,L=e=>[...e?.values()??[]],F=(e,t)=>e?.forEach(t),U=(e,t)=>e?.delete(t),_=e=>new Map(e),Z=(e,t)=>e?.get(t),H=(e,t)=>F(e,((e,l)=>t(l,e))),Q=(e,t)=>k([...e?.entries()??[]],(([e,l])=>t(l,e))),q=(e,t,l)=>M(l)?(U(e,t),e):e?.set(t,l),K=(e,t,l)=>(B(e,t)||q(e,t,l()),Z(e,t)),X=e=>e.toUpperCase(),Y=e=>e.toLowerCase(),ee="a ",te="A function for",le="Callback",ae="Del",oe="export",ne="Id",re="Invalid",se="Json",de=Y(d),ce=" | undefined",$e="Partial",ie=`Registers a ${de} that will be called`,ue="Represents",Ie="Set",pe="[]",be="the Store",he="Transaction",me=Y(he),Ce="the end of the "+me,ge="void",we=" => "+ge,fe=ee+"string serialization of",ye=" ",ve="Gets a callback that can ",Re="the ",Ve=(e=0,t=0)=>`the ${Be[e]}content of`+(t?ye+be:l),ke=(e=0,t,a=0)=>Je[t]+ye+Ve(e,1)+(a?" when set":l),Se=(e,t=0)=>ue+` a Row when ${t?"s":"g"}etting ${Ve()} the '${e}' `+u,xe=(e,t,l=0)=>`Gets ${l?"sorted, paginated":"the"} Ids of the ${e}s in `+t,Pe=(e,t)=>`Calls a function for each ${e} in `+t,Te=e=>"The props passed to a component that renders "+e,Ee=e=>"A function that takes "+e,De=(e,t=0)=>te+" listening to changes to "+We[e]+" in "+We[t],Oe=(e,t,a=0)=>ie+" whenever "+We[e]+" in "+We[t]+" change"+(a?l:"s"),Ae=e=>`the '${e}' `+u,Ne=e=>"the specified Row in "+Ae(e),je=(e,t=0)=>Je[t]+` ${Ve()} `+Ae(e),Me=(e,t=0)=>Je[t]+` ${Ve()} `+Ne(e),ze=(e,t,l=0)=>Je[l]+` the '${t}' Cell for `+Ne(e),Ge=(e,t=0)=>Je[t]+` the '${e}' Value`,Je=["Gets","Checks existence of","Sets","Deletes","Sets part of",ue,"Gets "+fe,"Sets "+fe,ie+" whenever",ve+"set",ve+"add",ve+"set part of",ve+"delete","Renders"],We=[be,I,Re+u+ye+i,ee+u,Re+b+ye+i,ee+b,Re+C+ye+i,ee+C,"invalid Cell changes",f,Re+w+ye+i,ee+w,"invalid Value changes",Re+"sorted "+b+ye+i],Be=[l,"tabular ","keyed value "],Le=e=>new Set(J(e)||M(e)?e:[e]),Fe=(e,t)=>e?.add(t),Ue=/[^A-Za-z]+/,_e=/[^A-Za-z0-9]+/,Ze=/^( *)\/\*\* *(.*?) *\*\/$/gm,He=(e,t,l)=>e.substring(t,l),Qe=e=>e.includes(","),qe=(e,t,l,a=1)=>{const o=`${t}${1==a?"":a}`;return B(e,o)?qe(e,t,l,a+1):(q(e,o,l),o)},Ke=e=>e.replace(Ze,((e,t,l)=>{const a=77-Xe(t);return`${t}/**\n${l.replace(RegExp(`([^\\n]{1,${a}})(\\s|$)`,"g"),t+" * $1\n")}${t} */`})),Xe=e=>e.length,Ye=(e,t=l)=>e.join(t),et=e=>e.flat(1e3),tt=(e,t=0)=>Ye(k(e.split(_e),((e,l)=>(l>0||t?X:Y)(He(e,0,1))+He(e,1)))),lt=e=>X(Ye((e&&!Ue.test(e[0])?e:" "+e).split(_e),"_")),at=e=>`/** ${e}. */`,ot=(...e)=>Ye(P(e,(e=>e)),", "),nt=()=>{const e=[_(),_(),_(),_()],t=_(),a=_();return[(...e)=>Ye(et(e),"\n"),(t,l,...a)=>V(a,(a=>V([0,1],(o=>(t??o)==o?Fe(K(e[o],l,Le),a):0)))),(e,l,a)=>qe(t,e,[l,a]),(e,t,l)=>qe(a,e,J(l)?[`(${t}) => {`,l,"}"]:[`(${t}) => ${l}`]),(e,t)=>Z(a,e)===t?e:qe(a,e,t),(t=0)=>k([...R(Q(e[t],((e,t)=>`import {${Ye(R(L(e)),", ")}} from '${t}';`)),((e,t)=>Qe(e)!=Qe(t)?Qe(e)?-1:1:e>t?1:-1)),l],(e=>e.replace("{React}","React"))),()=>Q(t,(([e,t],a)=>[at(t),`${oe} type ${a} = ${e};`,l])),()=>Q(a,((e,t)=>(e=J(e)?e:[e],T(e,E(e)+";"),[`const ${t} = ${O(e)}`,e,l])))]},rt=Object,st=rt.keys,dt=rt.freeze,ct=e=>j(e,rt)&&e.constructor==rt,$t=(e,t)=>k(rt.entries(e),(([e,l])=>t(l,e))),it=e=>ct(e)&&x(st(e)),ut=e=>{const t=new WeakMap;return l=>(t.has(l)||t.set(l,e(l)),t.get(l))},It=(e,t,l)=>[t=>$t(e,((e,a)=>t(a,tt(a,1),l(lt(a),`'${a}'`)))),(t,a)=>$t(e[t],((e,t)=>a(t,e[r],e[s],l(lt(t),`'${t}'`),tt(t,1)))),e=>$t(t,((t,a)=>e(a,t[r],t[s],l(lt(a),`'${a}'`),tt(a,1))))],pt=[c,"has","set","del","set","forEach",$,l],bt=(e,t=l,a=l)=>`store.${e}(${t})`+(a?" as "+a:l),ht=(e,t=l)=>`fluent(() => ${bt(e,t)})`,mt=(e,t=l,a=l)=>`store.${e}(${t?t+", ":l}proxy(listener)${a?", "+a:l})`,Ct=(e,t,a)=>{const[n,c,v,R,k,S,x,P]=nt(),[E,O,A]=It(e,t,k),N=_(),j=(e=0)=>Q(N,(([t,a,o,n,r],s)=>{const d=e?[s+`: ${r}(${t}): ${a} => ${o},`]:[s+r+`(${t}): ${a};`];return e||D(d,at(n)),T(d,l),d})),z=(e,t,a,o,n,r=l)=>qe(N,e,[t,a,o,n,r]),J=(e,t,a,o,n,r=l,s=l,d=l)=>z(pt[e]+t+(4==e?$e:l)+a,r,o,(o==F?ht:bt)(pt[e]+(4==e?$e:l)+a,s,e?void 0:o),n,d),W=(e,t,a,o=l,n=l,r=1)=>z($+e+d,(o?o+", ":l)+de+": "+t+(r?", mutator?: boolean":l),ne,mt($+e+d,n,r?"mutator":l),a),B=`./${tt(a)}.d`,F=tt(a,1),U=tt(F),K=[],X=_();let Y=[],ae=[];if(c(1,B,F,`create${F} as create${F}Decl`),!it(e)){const e=_();E(((t,a)=>{const o=[v(a+u,`{[rowId: Id]: ${a}Row}`,ue+` the '${t}' `+u),v(a+b,`{${Ye(O(t,((e,t,a)=>`'${e}'${M(a)?"?":l}: ${t};`))," ")}}`,Se(t)),v(a+b+"WhenSet",`{${Ye(O(t,((e,t)=>`'${e}'?: ${t};`))," ")}}`,Se(t,1)),v(a+C+ne,Ye(O(t,(e=>`'${e}'`))," | "),`A Cell Id for the '${t}' `+u),v(a+C+le,`(...[cellId, cell]: ${Ye(O(t,((e,t)=>`[cellId: '${e}', cell: ${t}]`))," | ")})`+we,Ee(`a Cell Id and value from a Row in the '${t}' `+u)),v(a+b+le,`(rowId: Id, forEachCell: (cellCallback: ${a}CellCallback)`+we+")"+we,Ee(`a Row Id from the '${t}' Table, and a Cell iterator`))];q(e,t,o),c(1,B,...o)})),c(null,"tinybase",i);const t=v(I,`{${Ye(E((t=>`'${t}'?: ${Z(e,t)?.[0]};`))," ")}}`,ke(1,5)),a=v(u+ne,Ye(E((e=>`'${e}'`))," | "),"A "+u+" Id in "+be),n=v(u+le,`(...[tableId, rowCallback]: ${Ye(E((t=>`[tableId: '${t}', forEachRow: (rowCallback: ${Z(e,t)?.[5]})${we}]`))," | ")})`+we,Ee(ee+u+" Id, and a Row iterator")),$=v("GetCellChange",`(...[tableId, rowId, cellId]: ${Ye(E((t=>`[tableId: '${t}', rowId: Id, cellId: ${Z(e,t)?.[3]}]`))," | ")}) => CellChange`,te+" returning information about any Cell's changes during a "+me),w=v(I+d,`(${U}: ${F}, getCellChange: ${$}${ce})`+we,De(1)),f=v(p+d,`(${U}: ${F})`+we,De(2)),y=v(u+d,`(${U}: ${F}, tableId: ${a}, getCellChange: ${$}${ce})`+we,De(3)),R=v(h+d,`(${U}: ${F}, tableId: ${a})`+we,De(4,3)),S=v(m+d,"("+ot(U+": "+F,"tableId: "+a,"cellId: Id"+ce,"descending: boolean","offset: number","limit: number"+ce,"sortedRowIds: Ids")+")"+we,De(13,3)),x=v(b+d,`(${U}: ${F}, tableId: ${a}, rowId: Id, getCellChange: ${$}${ce})`+we,De(5,3)),P=v(g+d,`(${U}: ${F}, tableId: ${a}, rowId: Id)`+we,De(6,5)),D=v(C+d,`(...[${U}, tableId, rowId, cellId, newCell, oldCell, getCellChange]: ${Ye(et(E((e=>O(e,((t,l)=>`[${U}: ${F}, tableId: '${e}', rowId: Id, cellId: '${t}', newCell: ${l}${ce}, oldCell: ${l}${ce}, getCellChange: ${$} | undefined]`)))))," | ")})`+we,De(7,5)),A=v(re+C+d,`(${U}: ${F}, tableId: Id, rowId: Id, cellId: Id, invalidCells: any[])`+we,De(8));Y=[t,a,w,f,y,R,S,x,P,D,e],V([[t],[o],[F,"tables: "+t,"tables"],[F]],(([e,t,a],o)=>J(o,l,I,e,ke(1,o),t,a))),J(0,l,p,a+pe,xe(u,be)),J(5,l,u,ge,Pe(u,be),"tableCallback: "+n,"tableCallback as any"),E(((t,a,n)=>{const[r,s,d,c,$,I]=Z(e,t);V([[r],[o],[F,"table: "+r,", table"],[F]],(([e,o,r=l],s)=>J(s,a,u,e,je(t,s),o,n+r))),J(0,a,h,i,xe(b,Ae(t)),l,n),J(0,a,m,i,xe(b,Ae(t),1),"cellId?: "+c+", descending?: boolean, offset?: number, limit?: number",n+", cellId, descending, offset, limit"),J(5,a,b,ge,Pe(b,Ae(t)),"rowCallback: "+I,n+", rowCallback as any"),V([[s],[o],[F,", row: "+d,", row"],[F],[F,", partialRow: "+d,", partialRow"]],(([e,o=l,r=l],s)=>J(s,a,b,e,Me(t,s),"rowId: Id"+o,n+", rowId"+r))),J(6,a,b,ne+ce,"Adds a new Row to "+Ae(t),"row: "+d,n+", row"),J(0,a,g,c+pe,xe(C,Ne(t)),"rowId: "+ne,n+", rowId"),J(5,a,C,ge,Pe(C,Ne(t)),"rowId: Id, cellCallback: "+$,n+", rowId, cellCallback as any"),O(t,((e,r,s,d,c)=>{const $="Map"+tt(r,1);q(X,r,$);const i=r+(M(s)?ce:l);V([[i],[o],[F,`, cell: ${r} | `+$,", cell as any"],[F]],(([o,r=l,s=l],$)=>J($,a+c,C,o,ze(t,e,$),"rowId: Id"+r,n+", rowId, "+d+s)))}))})),J(0,l,I+se,se,ke(1,6)),J(2,l,I+se,F,ke(1,7),"tablesJson: "+se,"tables"+se),W(I,w,ke(1,8)+" changes"),W(p,f,Oe(2,0,1)),W(u,y,Oe(3,0),`tableId: ${a} | null`,"tableId"),W(h,R,Oe(4,3,1),`tableId: ${a} | null`,"tableId"),W(m,S,Oe(13,3,1),ot("tableId: "+a,"cellId: Id"+ce,"descending: boolean","offset: number","limit: number"+ce),ot("tableId","cellId","descending","offset","limit")),W(b,x,Oe(5,3),`tableId: ${a} | null, rowId: IdOrNull`,"tableId, rowId"),W(g,P,Oe(6,5,1),`tableId: ${a} | null, rowId: IdOrNull`,"tableId, rowId"),W(C,D,Oe(7,5),`tableId: ${a} | null, rowId: IdOrNull, cellId: ${Ye(E((t=>Z(e,t)?.[3]??l))," | ")} | null`,"tableId, rowId, cellId"),W(re+C,A,ie+" whenever an invalid Cell change was attempted","tableId: IdOrNull, rowId: IdOrNull, cellId: IdOrNull","tableId, rowId, cellId"),c(1,B,t,a,n,w,f,y,R,S,x,P,D,A,...L(X)),c(0,"tinybase","CellChange"),T(K,".setTablesSchema({",et(E(((e,t,a)=>[`[${a}]: {`,...O(e,((e,t,a,o)=>`[${o}]: {[${k(lt(r),`'${r}'`)}]: ${k(lt(t),`'${t}'`)}${M(a)?l:`, [${k(lt(s),`'${s}'`)}]: `+(G(a)?k(lt(a),`'${a}'`):a)}},`)),"},"]))),"})")}if(!it(t)){const e=v(f,"{"+Ye(A(((e,t,a)=>`'${e}'${M(a)?"?":l}: ${t};`))," ")+"}",ke(2,5)),t=v(f+"WhenSet","{"+Ye(A(((e,t)=>`'${e}'?: ${t};`))," ")+"}",ke(2,5,1)),a=v(w+ne,Ye(A((e=>`'${e}'`))," | "),"A Value Id in "+be),n=v(w+le,`(...[valueId, rowCallback]: ${Ye(A(((e,t)=>`[valueId: '${e}', value: ${t}]`))," | ")})`+we,Ee("a Value Id, and value")),$=v("GetValueChange",`(valueId: ${a}) => ValueChange`,te+" returning information about any Value's changes during a "+me),i=v(f+d,`(${U}: ${F}, getValueChange: ${$}${ce})`+we,De(9)),u=v(y+d,`(${U}: ${F})`+we,De(10)),I=v(w+d,`(...[${U}, valueId, newValue, oldValue, getValueChange]: ${Ye(A(((e,t)=>`[${U}: ${F}, valueId: '${e}', newValue: ${t}${ce}, oldValue: ${t}${ce}, getValueChange: ${$} | undefined]`))," | ")})`+we,De(11)),p=v(re+w+d,`(${U}: ${F}, valueId: Id, invalidValues: any[])`+we,De(12));ae=[e,t,a,i,u,I],V([[e],[o],[F,"values: "+t,"values"],[F],[F,"partialValues: "+t,"partialValues"]],(([e,t,a],o)=>J(o,l,f,e,ke(2,o),t,a))),J(0,l,y,a+pe,xe(w,be)),J(5,l,w,"void",Pe(w,be),"valueCallback: "+n,"valueCallback as any"),A(((e,t,a,n,r)=>{const s="Map"+tt(t,1);q(X,t,s),V([[t],[o],[F,`value: ${t} | `+s,", value as any"],[F]],(([t,a,o=l],s)=>J(s,r,w,t,Ge(e,s),a,n+o)))})),J(0,l,f+se,se,ke(2,6)),J(2,l,f+se,F,ke(2,7),"valuesJson: "+se,"values"+se),W(f,i,ke(2,8)+" changes"),W(y,u,Oe(10,0,1)),W(w,I,Oe(11,0),`valueId: ${a} | null`,"valueId"),W(re+w,p,ie+" whenever an invalid Value change was attempted","valueId: IdOrNull","valueId"),c(1,B,e,t,a,n,i,u,I,p,...L(X)),c(0,"tinybase","ValueChange"),T(K,".setValuesSchema({",A(((e,t,a,o)=>[`[${o}]: {[${k(lt(r),`'${r}'`)}]: ${k(lt(t),`'${t}'`)}${M(a)?l:`, [${k(lt(s),`'${s}'`)}]: `+(G(a)?k(lt(a),`'${a}'`):a)}},`])),"})")}H(X,((e,t)=>v(t,`(cell: ${e}${ce}) => `+e,`Takes a ${e} Cell value and returns another`))),c(null,"tinybase","DoRollback",ne,"IdOrNull",se,"Store");const Ie=v(he+d,`(${U}: ${F}, cellsTouched: boolean, valuesTouched: boolean)`+we,te+" listening to the completion of a "+me);return J(0,l,se,se,ke(0,6)),J(2,l,se,F,ke(0,7),"json: "+se,"json"),J(7,l,me,"Return","Execute a "+me+" to make multiple mutations","actions: () => Return, doRollback?: DoRollback","actions, doRollback","<Return>"),J(7,l,"start"+he,F,"Explicitly starts a "+me),J(7,l,"finish"+he,F,"Explicitly finishes a "+me,"doRollback?: DoRollback,","doRollback"),W("WillFinish"+he,Ie,ie+" just before "+Ce,l,l,0),W("DidFinish"+he,Ie,ie+" just after "+Ce,l,l,0),J(7,l,"call"+d,F,"Manually provoke a listener to be called","listenerId: Id","listenerId"),J(3,l,d,F,"Remove a listener that was previously added to "+be,"listenerId: Id","listenerId"),z("getStore",l,"Store","store",Je[0]+" the underlying Store object"),c(1,"tinybase","createStore"),c(1,B,F,`create${F} as create${F}Decl`,Ie),k("store",["createStore()",...K]),R("fluent","actions: () => Store",["actions();",`return ${U};`]),R("proxy","listener: any",`(_: Store, ...params: any[]) => listener(${U}, ...params)`),k(U,["{",...j(1),"}"]),[n(...S(0),...x(),oe+" interface "+F+" {",...j(0),"}",l,at(`Creates a ${F} object`),oe+" function create"+F+"(): "+F+";"),n(...S(1),oe+" const create"+F+": typeof create"+F+"Decl = () => {",...P(),`return Object.freeze(${U});`,"};"),Y,ae]},gt="Deps",wt=e=>c+e,ft=e=>ot(wt(e),wt(e)+gt),yt=(...e)=>"{"+Ye(k(e,(e=>"readonly "+e)),"; ")+"}",vt="debugIds?: boolean",Rt="debugIds={debugIds}",Vt=gt+"?: React.DependencyList",kt="then"+Vt,St="Parameter",xt=": (parameter: "+St+", store: Store) => ",Pt="Provider",Tt="const contextValue = useContext(Context);",Et=", and registers a listener so that any changes to that result will cause a re-render",Dt=", based on a parameter",Ot=": ",At="?: ",Nt="<"+St+",>",jt=St+"ized"+le+"<"+St+">",Mt="Props",zt="rowId",Gt="rowId={rowId}",Jt=", separator, debugIds",Wt="separator?: ReactElement | string",Bt="then?: (store: Store",Lt=ot(Bt+")"+we,kt),Ft="then, then"+gt,Ut=zt+Ot+ne,_t="View",Zt=(e,...t)=>ot(...t,de+": "+e,de+Vt,"mutator?: boolean"),Ht=(...e)=>ot(...e,de,de+gt,"mutator"),Qt=(e,t,a,o,n)=>{const[r,s,c,$,v,R,V,k]=nt(),[S,x,P]=It(e,t,v),E=`./${tt(a)}.d`,O=`./${tt(a)}-ui-react.d`,A="tinybase/ui-react",N=tt(a,1),j=tt(N),z=N+"Or"+N+ne,G=j+"Or"+N+ne,J=j+`={${j}}`,W=_(),B=(e,t,a,o,n,r=l)=>(s(1,O,e+" as "+e+"Decl"),qe(W,e,[t,a,o,n,r])),L=(e,t,a,o,n,r=l)=>B("use"+e,t,a,o,n,r),F=(e,t,a,o,n=l,r=l,d=l,c=l,$=l)=>(s(1,A,`use${t} as use${t}Core`),L(e,ot(n,X,c),a,ee+`(${G}, use${t}Core, [`+(r||l)+($?"], ["+$:l)+"]);",o,d)),U=(e,t,l,a)=>B(e,t,1,l,a),H=(e=0)=>Q(W,(([t,a,o,n,r],s)=>{const d=e?[oe+` const ${s}: typeof ${s}Decl = ${r}(${t}): ${1==a?"any":a} =>`,o]:[oe+` function ${s}${r}(${t}): ${1==a?"ComponentReturnType":a};`];return e||D(d,at(n)),T(d,l),d}));s(null,"tinybase",ne,"Store",le,St+"ized"+le),s(0,A,"ComponentReturnType"),s(null,A,"ExtraProps"),s(0,E,N);const q=c(z,N+" | "+ne,`Used when you need to refer to a ${N} in a React hook or component`),K=c(Pt+Mt,yt(j+At+N,j+`ById?: {[${j}Id: Id]: ${N}}`),`Used with the ${Pt} component, so that a `+N+" can be passed into the context of an application");s(0,"react","ReactElement","ComponentType"),s(1,"react","React"),s(1,O,q,K);const X=G+At+q;v("{createContext, useContext, useMemo}","React"),v("Context",`createContext<[${N}?, {[${j}Id: Id]: ${N}}?]>([])`),L("Create"+N,`create: () => ${N}, create`+Vt,N,"\n// eslint-disable-next-line react-hooks/exhaustive-deps\nuseMemo(create, createDeps)",`Create a ${N} within a React application with convenient memoization`);const Y=L(N,"id?: Id",N+ce,["{",Tt,"return id == null ? contextValue[0] : contextValue[1]?.[id];","}"],`Get a reference to a ${N} from within a ${Pt} component context`),ee=$("useHook",G+`: ${q} | undefined, hook: (...params: any[]) => any, preParams: any[], postParams: any[] = []`,[`const ${j} = ${Y}(${G} as Id);`,`return hook(...preParams, ((${G} == null || typeof ${G} == 'string')`,`? ${j} : ${G})?.getStore(), ...postParams)`]),te=$("getProps","getProps: ((id: any) => ExtraProps) | undefined, id: Id","(getProps == null) ? ({} as ExtraProps) : getProps(id)"),re=$("wrap",ot("children: any","separator?: any","encloseWithId?: boolean","id?: Id"),["const separated = separator==null || !Array.isArray(children)"," ? children"," : children.map((child, c) => (c > 0 ? [separator, child] : child));","return encloseWithId ? [id, ':{', separated, '}'] : separated;"]),se=v("NullComponent","() => null");if(!it(e)){const[e,t,a,n,r,w,f,y,v,R,V]=o;s(null,E,e,t,a,n,r,w,f,y,v,R),s(1,E,N),s(null,"tinybase",i,"IdOrNull");const k=$("tableView",`{${j}, rowComponent, getRowComponentProps`+Jt+"}: any, rowIds: Ids, tableId: Id, defaultRowComponent: React.ComponentType<any>",["const Row = rowComponent ?? defaultRowComponent;",`return ${re}(rowIds.map((rowId) => (`,"<Row","{..."+te+"(getRowComponentProps, rowId)}","key={rowId}","tableId={tableId}",Gt,J,Rt,"/>","))",Jt,", tableId,",");"]),P=$("getDefaultTableComponent","tableId: Id",Ye(S(((e,t,l)=>`tableId == ${l} ? ${t}TableView : `)))+se),T=$("getDefaultCellComponent","tableId: Id, cellId: Id",Ye(S(((e,t,l)=>`tableId == ${l} ? ${Ye(x(e,((e,l,a,o,n)=>`cellId == ${o} ? `+t+n+"CellView : ")))+se} : `)))+se);F(I,I,e,ke(1,0)+Et);const D=F(p,p,t+pe,xe(u,be)+Et);F(Ie+I+le,Ie+I+le,jt,ke(1,9)+Dt,ot(wt(I)+xt+e,wt(I)+Vt),ft(I),Nt,ot(Bt,`tables: ${e})`+we,kt),Ft),F(ae+I+le,ae+I+le,le,ke(1,12),l,l,l,Lt,Ft);const A=c(I+Mt,yt(j+At+N,"tableComponents?: {"+Ye(S(((e,t)=>`'${e}'?: ComponentType<${t}TableProps>`)),", ")+"}",`getTableComponentProps?: (tableId: ${t}) => ExtraProps`,Wt,vt),Te(Ve(1,1))),z=c(C+Mt,yt("rowId: Id",j+At+N,vt),Te("a Cell"));s(1,O,A,z),U(I+_t,"{"+j+", tableComponents, getTableComponentProps"+Jt+"}: "+A,[re+`(${D}(${j}).map((tableId) => {`,"const Table = tableComponents?.[tableId] ?? "+P+"(tableId);","return <Table",`{...${te}(getTableComponentProps, tableId)}`,"key={tableId}",J,Rt,"/>;","}), separator)"],ke(1,13)+Et),S(((e,t,a)=>{const[o,n,r,d]=Z(V,e);s(0,E,o,n,r,d),s(1,E,o,n,r,d),F(t+u,u,o,je(e)+Et,l,a);const $=F(t+h,h,i,xe(b,Ae(e))+Et,l,a),I=F(t+m,m,i,xe(b,Ae(e),1)+Et,"cellId?: "+d+", descending?: boolean, offset?: number, limit?: number",a+", cellId, descending, offset, limit");F(t+b,b,n,Me(e)+Et,Ut,ot(a,zt));const p=F(t+g,g,d+pe,xe(C,Ne(e))+Et,Ut,ot(a,zt));F(Ie+t+u+le,Ie+u+le,jt,je(e,9)+Dt,ot(wt(u)+xt+o,wt(u)+Vt),ot(a,ft(u)),Nt,ot(Bt,`table: ${o})`+we,kt),Ft),F(ae+t+u+le,ae+u+le,le,je(e,12),l,a,l,Lt,Ft),F(Ie+t+b+le,Ie+b+le,jt,Me(e,9)+Dt,ot(Ut,wt(b)+xt+r,wt(b)+Vt),ot(a,zt,ft(b)),Nt,ot(Bt,`row: ${r})`+we,kt),Ft),F("Add"+t+b+le,"Add"+b+le,jt,Me(e,10)+Dt,ot(wt(b)+xt+r,wt(b)+Vt),ot(a,ft(b)),Nt,"then?: ("+ot(Ut+ce,"store: Store","row: "+r+")"+we,"then"+Vt),Ft),F(Ie+t+$e+b+le,Ie+$e+b+le,jt,Me(e,11)+Dt,ot(Ut,wt($e+b)+xt+r,wt($e+b)+Vt),ot(a,zt,ft($e+b)),Nt,ot(Bt,`partialRow: ${r})`+we,kt),Ft),F(ae+t+b+le,ae+b+le,le,Me(e,12),Ut,ot(a,zt),l,Lt,Ft);const w=c(t+"RowProps",yt("rowId: Id",j+At+N,"cellComponents?: {"+Ye(x(e,(e=>`'${e}'?: ComponentType<${z}>`)),", ")+"}",`getCellComponentProps?: (cellId: ${d}) => ExtraProps`,Wt,vt),Te(Ne(e))),f=c(t+"TableProps",yt(j+At+N,`rowComponent?: ComponentType<${w}>`,"getRowComponentProps?: (rowId: Id) => ExtraProps",Wt,vt),Te(Ae(e))),y=c(t+"SortedTableProps",yt("cellId?: "+d,"descending?: boolean","offset?: number","limit?: number",j+At+N,`rowComponent?: ComponentType<${w}>`,"getRowComponentProps?: (rowId: Id) => ExtraProps",Wt,vt),Te(Ae(e))+", sorted");s(1,O,w,f,y);const v=U(t+b+_t,"{rowId, "+j+", cellComponents, getCellComponentProps"+Jt+"}: "+w,[re+`(${p}(rowId, ${j}).map((cellId) => {`,"const Cell = cellComponents?.[cellId] ?? "+T+`(${a}, cellId);`,"return <Cell",`{...${te}(getCellComponentProps, cellId)} `,"key={cellId}",Gt,J,Rt,"/>;","})"+Jt+", rowId)"],Me(e,13)+Et);U(t+"Sorted"+u+_t,"{cellId, descending, offset, limit, ...props}: "+y,k+"(props, "+I+`(cellId, descending, offset, limit, props.${j}), ${a}, ${v});`,je(e,13)+", sorted"+Et),U(t+u+_t,"props: "+f,k+"(props, "+$+`(props.${j}), ${a}, ${v});`,je(e,13)+Et),x(e,((o,n,r,d,c)=>{const $="Map"+tt(n,1);s(0,E,$),s(1,E,$);const i=F(t+c+C,C,n+(M(r)?ce:l),ze(e,o)+Et,Ut,ot(a,zt,d));F(Ie+t+c+C+le,Ie+C+le,jt,ze(e,o,9)+Dt,ot(Ut,wt(C)+xt+n+" | "+$,wt(C)+Vt),ot(a,zt,d,ft(C)),Nt,ot(Bt,`cell: ${n} | ${$})`+we,kt),Ft),F(ae+t+c+C+le,ae+C+le,le,ze(e,o,12),ot(Ut,"forceDel?: boolean"),ot(a,zt,d,"forceDel"),l,Lt,Ft),U(t+c+C+_t,`{rowId, ${j}, debugIds}: `+z,[re+`('' + ${i}(rowId, `+j+`) ?? '', undefined, debugIds, ${d})`],ze(e,o,13)+Et)}))}));const G=Ye(S((e=>Z(V,e)?.[3]??l))," | ");F(I+d,I+d,ge,ke(1,8)+" changes",Zt(a),Ht()),F(p+d,p+d,ge,Oe(2,0,1),Zt(n),Ht()),F(u+d,u+d,ge,Oe(3,0),Zt(r,`tableId: ${t} | null`),Ht("tableId")),F(h+d,h+d,ge,Oe(4,3,1),Zt(w,`tableId: ${t} | null`),Ht("tableId")),F(m+d,m+d,ge,Oe(13,3,1),Zt(f,`tableId: ${t} | null`,"cellId: "+G+ce,"descending: boolean","offset: number","limit: number"+ce),Ht("tableId","cellId","descending","offset","limit")),F(b+d,b+d,ge,Oe(5,3),Zt(y,`tableId: ${t} | null`,zt+": IdOrNull"),Ht("tableId",zt)),F(g+d,g+d,ge,Oe(6,5,1),Zt(v,`tableId: ${t} | null`,zt+": IdOrNull"),Ht("tableId",zt)),F(C+d,C+d,ge,Oe(7,5),Zt(R,`tableId: ${t} | null`,zt+": IdOrNull",`cellId: ${G} | null`),Ht("tableId",zt,"cellId"))}if(!it(t)){const[e,t,a,o,r,i]=n;s(null,E,...n),s(1,E,N);const u=$("getDefaultValueComponent","valueId: Id",Ye(P(((e,t,l,a,o)=>`valueId == ${a} ? `+o+"ValueView : ")))+se);F(f,f,e,ke(2,0)+Et);const I=F(y,y,a+pe,xe(w,be)+Et);F(Ie+f+le,Ie+f+le,jt,ke(2,9)+Dt,ot(wt(f)+xt+t,wt(f)+Vt),ft(f),Nt,ot(Bt,`values: ${t})`+we,kt),Ft),F(Ie+$e+f+le,Ie+$e+f+le,jt,ke(2,11)+Dt,ot(wt($e+f)+xt+t,wt($e+f)+Vt),ft($e+f),Nt,ot(Bt,`partialValues: ${t})`+we,kt),Ft),F(ae+f+le,ae+f+le,le,ke(2,12),l,l,l,Lt,Ft);const p=c(w+Mt,yt(j+At+N,vt),Te("a Value")),b=c(f+Mt,yt(j+At+N,"valueComponents?: {"+Ye(P((e=>`'${e}'?: ComponentType<${p}>`)),", ")+"}",`getValueComponentProps?: (valueId: ${a}) => ExtraProps`,Wt,vt),Te(Ve(2,1)));s(1,O,b,p),U(f+_t,"{"+j+", valueComponents, getValueComponentProps"+Jt+"}: "+b,[re+`(${I}(${j}).map((valueId) => {`,"const Value = valueComponents?.[valueId] ?? "+u+"(valueId);","return <Value",`{...${te}(getValueComponentProps, valueId)}`,"key={valueId}",J,Rt,"/>;","}), separator)"],ke(2,13)+Et),P(((e,t,a,o,n)=>{const r="Map"+tt(t,1);s(0,E,r),s(1,E,r);const d=F(n+w,w,t,Ge(e)+Et,l,o);F(Ie+n+w+le,Ie+w+le,jt,Ge(e,9)+Dt,ot(wt(w)+xt+t+" | "+r,wt(w)+Vt),ot(o,ft(w)),Nt,ot(Bt,`value: ${t} | ${r})`+we,kt),Ft),F(ae+n+w+le,ae+w+le,le,Ge(e,12),l,o,l,Lt,Ft),U(n+w+_t,`{${j}, debugIds}: `+p,[re+`('' + ${d}(`+j+`) ?? '', undefined, debugIds, ${o})`],Ge(e,13)+Et)})),F(f+d,f+d,ge,ke(2,8)+" changes",Zt(o),Ht()),F(y+d,y+d,ge,Oe(10,0,1),Zt(r),Ht()),F(w+d,w+d,ge,Oe(11,0),Zt(i,`valueId: ${a} | null`),Ht("valueId"))}return U(Pt,`{${j}, ${j}ById, children}: `+K+" & {children: React.ReactNode}",["{",Tt,"return (","<Context."+Pt,"value={useMemo(",`() => [${j} ?? contextValue[0], {...contextValue[1], ...${j}ById}],`,`[${j}, ${j}ById, contextValue],`,")}>","{children}",`</Context.${Pt}>`,");","}"],"Wraps part of an application in a context that provides default objects to be used by hooks and components within"),[r(...R(0),...V(),...H(0)),r(...R(1),...k(),...H(1))]},qt=(e,t,a)=>{if(it(e)&&it(t))return[l,l,l,l];const[o,n,r,s]=Ct(e,t,a);return[o,n,...Qt(e,t,a,r,s)]},Kt={parser:"typescript",singleQuote:!0,trailingComma:"all",bracketSpacing:!1,jsdocSingleLineComment:!1},Xt=ut((e=>{const t=()=>{const t=A(e.getTablesSchemaJson());return!it(t)||v(e.getTableIds(),(l=>{const a=e.getRowIds(l),o=_();if(v(a,(t=>v(e.getCellIds(l,t),(a=>{const n=e.getCell(l,t,a),r=K(o,a,(()=>[W(n),_(),[0],0])),[s,d,[c]]=r,$=K(d,n,(()=>0))+1;return $>c&&(r[2]=[$,n]),q(d,n,$),r[3]++,s==W(n)})))))return t[l]={},F(o,(([e,,[,o],n],d)=>{t[l][d]={[r]:e,...n==S(a)?{[s]:o}:{}}})),1}))?t:{}},l=()=>{const t=A(e.getValuesSchemaJson());return it(t)&&e.forEachValue(((e,l)=>{t[e]={[r]:W(l)}})),t},a=e=>qt(t(),l(),e),o=async e=>{const t=["d.ts","ts","d.ts","tsx"];let l;try{l=(await import("prettier")).format}catch(e){l=e=>e}return k(a(e),((e,a)=>Ke(l(e,{...Kt,filepath:"_."+t[a]}))))};return dt({getStoreStats:t=>{let l=0,a=0,o=0;const n={};return e.forEachTable(((e,r)=>{l++;let s=0,d=0;const c={};r(((e,l)=>{s++;let a=0;l((()=>a++)),d+=a,t&&(c[e]={rowCells:a})})),a+=s,o+=d,t&&(n[e]={tableRows:s,tableCells:d,rows:c})})),{totalTables:l,totalRows:a,totalCells:o,totalValues:S(e.getValueIds()),jsonLength:Xe(e.getJson()),...t?{detail:{tables:n}}:{}}},getStoreTablesSchema:t,getStoreValuesSchema:l,getStoreApi:a,getPrettyStoreApi:o,getStore:()=>e})}));e.createTools=Xt},"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).TinyBaseTools={});
