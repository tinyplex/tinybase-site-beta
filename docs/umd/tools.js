var e,t;e=this,t=function(e){"use strict";const t=e=>typeof e,a="",l=t(a),n=t(!0),o=t(0),d="type",r="default",s="Listener",I="get",c="add",i="Ids",$="Table",u=$+"s",p=$+i,b="Row",C=b+i,m="Sorted"+b+i,h="Cell",g=h+i,f="Value",w=f+"s",y=f+i,T=(e,t)=>e.every(t),v=(e,t)=>e.sort(t),V=(e,t)=>e.forEach(t),x=(e,t)=>e.map(t),R=e=>e.length,S=e=>0==R(e),k=(e,t)=>e.filter(t),A=(e,...t)=>e.push(...t),P=e=>e.pop(),E=(e,...t)=>e.unshift(...t),D=e=>e.shift(),O=JSON.parse,N=isFinite,j=(e,t)=>e instanceof t,L=e=>null==e,M=e=>e==l||e==n,G=e=>t(e)==l,z=e=>Array.isArray(e),J=e=>{const a=t(e);return M(a)||a==o&&N(e)?a:void 0},W=(e,t)=>e?.has(t)??!1,F=e=>[...e?.values()??[]],B=(e,t)=>e?.forEach(t),U=(e,t)=>e?.delete(t),_=e=>new Map(e),Z=(e,t)=>e?.get(t),H=(e,t)=>B(e,((e,a)=>t(a,e))),Q=(e,t)=>x([...e?.entries()??[]],(([e,a])=>t(a,e))),q=(e,t,a)=>L(a)?(U(e,t),e):e?.set(t,a),K=(e,t,a)=>(W(e,t)||q(e,t,a()),Z(e,t)),X=e=>e.toUpperCase(),Y=e=>e.toLowerCase(),ee="a ",te="A function for",ae=", and registers a listener so that any changes to that result will cause a re-render",le="Callback",ne="Del",oe="Deps",de=oe+"?: React.DependencyList",re="doRollback?: DoRollback",se="actions: () => Return, "+re,Ie="export",ce="Id",ie="IdOrNull",$e="Invalid",ue="Json",pe=Y(s),be="?: ",Ce=" | undefined",me="NonNullable",he="Partial",ge="Props",fe="Provider",we=`Registers a ${pe} that will be called`,ye="Represents",Te="rowId: "+ce,ve="rowId: "+ie,Ve="Schema",xe="Set",Re=", descending?: boolean, offset?: number, limit?: number",Se="[]",ke="Store",Ae="the "+ke,Pe="Transaction",Ee=Y(Pe),De="Execute a "+Ee+" to make multiple mutations",Oe="Explicitly starts a "+Ee,Ne="Explicitly finishes a "+Ee,je="the end of the "+Ee,Le="void",Me=" => "+Le,Ge="WhenSet",ze=" when setting it",Je=ee+"string serialization of",We=" ",Fe="Gets a callback that can ",Be="the ",Ue=" the schema for",_e=(e=0,t=0)=>`the ${it[e]}content of`+(t?We+Ae:a),Ze=(e=0,t,l=0)=>st[t]+We+_e(e,1)+(l?" when setting it":a),He=(e,t=0)=>ye+` a Row when ${t?"s":"g"}etting ${_e()} the '${e}' `+$,Qe=(e,t,a=0)=>`Gets ${a?"sorted, paginated":"the"} Ids of the ${e}s in `+t,qe=(e,t)=>`Calls a function for each ${e} in `+t,Ke=e=>"The props passed to a component that renders "+e,Xe=e=>"A function that takes "+e,Ye=(e,t=0)=>te+" listening to changes to "+ct[e]+" in "+ct[t],et=(e,t,l=0)=>we+" whenever "+ct[e]+" in "+ct[t]+" change"+(l?a:"s"),tt=e=>`the '${e}' `+$,at=e=>"the specified Row in "+tt(e),lt=(e=0,t=0)=>st[e]+We+ct[t],nt=(e,t=0)=>st[t]+` ${_e()} `+tt(e),ot=(e,t=0)=>st[t]+` ${_e()} `+at(e),dt=(e,t,a=0)=>st[a]+` the '${t}' Cell for `+at(e),rt=(e,t=0)=>st[t]+` the '${e}' Value`,st=["Gets","Checks existence of","Sets","Deletes","Sets part of",ye,"Gets "+Je,"Sets "+Je,we+" whenever",Fe+"set",Fe+"add",Fe+"set part of",Fe+"delete","Renders","Gets "+Je+Ue,"Sets"+Ue,"Deletes"+Ue],It=[I,"has","set","del","set","forEach",c,a],ct=[Ae,u,Be+$+We+i,ee+$,Be+b+We+i,ee+b,Be+h+We+i,ee+h,"invalid Cell changes",w,Be+f+We+i,ee+f,"invalid Value changes",Be+"sorted "+b+We+i],it=[a,"tabular ","keyed value "],$t=e=>new Set(z(e)||L(e)?e:[e]),ut=(e,t)=>e?.add(t),pt=/[^A-Za-z]+/,bt=/[^A-Za-z0-9]+/,Ct=/^( *)\/\*\* *(.*?) *\*\/$/gm,mt=(e,t,a)=>e.substring(t,a),ht=e=>e.includes(","),gt=(e,t,a,l=1)=>{const n=`${t}${1==l?"":l}`;return W(e,n)?gt(e,t,a,l+1):(q(e,n,a),n)},ft=e=>e.replace(Ct,((e,t,a)=>{const l=77-wt(t);return`${t}/**\n${a.replace(RegExp(`([^\\n]{1,${l}})(\\s|$)`,"g"),t+" * $1\n")}${t} */`})),wt=e=>e.length,yt=(e,t=a)=>e.join(t),Tt=e=>e.flat(1e3),vt=(e,t=0)=>yt(x(e.split(bt),((e,a)=>(a>0||t?X:Y)(mt(e,0,1))+mt(e,1)))),Vt=e=>X(yt((e&&!pt.test(e[0])?e:" "+e).split(bt),"_")),xt=e=>`/** ${e}. */`,Rt=(...e)=>yt(k(e,(e=>e)),", "),St=(...e)=>"{"+yt(e,"; ")+"}",kt=(...e)=>St(...x(e,(e=>"readonly "+e))),At=()=>{const e=[_(),_(),_(),_()],t=_(),l=_();return[(...e)=>yt(Tt(e),"\n"),(t,a,...l)=>V(l,(l=>V([0,1],(n=>(t??n)==n?ut(K(e[n],a,$t),l):0)))),(e,l,n,o=a,d=1)=>gt(t,e,[l,n,o,d]),(e,t,a)=>gt(l,e,z(a)?[`(${t}) => {`,a,"}"]:[`(${t}) => ${a}`]),(e,t)=>Z(l,e)===t?e:gt(l,e,t),(t=0)=>x([...v(Q(e[t],((e,t)=>`import {${yt(v(F(e)),", ")}} from '${t}';`)),((e,t)=>ht(e)!=ht(t)?ht(e)?-1:1:e>t?1:-1)),a],(e=>e.replace("{React}","React"))),()=>Q(t,(([e,t,l,n],o)=>[xt(t),`${n?Ie+" ":a}type ${o}${l} = ${e};`,a])),()=>Q(l,((e,t)=>(e=z(e)?e:[e],A(e,P(e)+";"),[`const ${t} = ${D(e)}`,e,a])))]},Pt=Object,Et=Pt.keys,Dt=Pt.freeze,Ot=e=>j(e,Pt)&&e.constructor==Pt,Nt=(e,t)=>x(Pt.entries(e),(([e,a])=>t(a,e))),jt=e=>Ot(e)&&S(Et(e)),Lt=e=>{const t=new WeakMap;return a=>(t.has(a)||t.set(a,e(a)),t.get(a))},Mt=(e,t,a)=>[t=>Nt(e,((e,l)=>t(l,vt(l,1),a(Vt(l),`'${l}'`)))),(t,l)=>Nt(e[t],((e,t)=>l(t,e[d],e[r],a(Vt(t),`'${t}'`),vt(t,1)))),e=>Nt(t,((t,l)=>e(l,t[d],t[r],a(Vt(l),`'${l}'`),vt(l,1))))],Gt=(e,t,l,n)=>[(n,o)=>{const d=n+": "+o,r=e(u,St(...t((e=>`'${e}'?: {[rowId: Id]: `+St(...l(e,((e,t,l)=>`'${e}'${L(l)?"?":a}: ${t}`)))+"}"))),Ze(1,5)),I=e(u+Ge,St(...t((e=>`'${e}'?: {[rowId: Id]: `+St(...l(e,((e,t)=>`'${e}'?: ${t}`)))+"}"))),Ze(1,5,1)),c=e($+ce,"keyof "+r,"A "+$+" Id in "+Ae),i=`<TId extends ${c}>`,f=e($,me+`<${r}[TId]>`,"A "+$+" in "+Ae,i),w=e($+Ge,me+`<${I}[TId]>`,"A "+$+" in "+Ae+ze,i),y=e(b,f+"<TId>[Id]","A "+b+" in a "+$,i),T=e(b+Ge,w+"<TId>[Id]","A "+b+" in a "+$+ze,i),v=e(h+ce,`Extract<keyof ${y}<TId>, Id>`,"A "+h+" Id in a "+b,i),V=e(h,me+`<${r}[TId]>[Id][CId]`,"A "+h+" in a "+b,`<TId extends ${c}, CId extends ${v}<TId>>`),x=e("CellIdCellArray",`CId extends ${v}<TId> ? [cellId: CId, cell: ${V}<TId, CId>] : never`,h+" Ids and types in a "+b,`<TId extends ${c}, CId = ${v}<TId>>`,0),R=e(h+le,`(...[cellId, cell]: ${x}<TId>)`+Me,Xe(ee+h+" Id, and "+h),i),S=e(b+le,"(rowId: Id, forEachCell: (cellCallback: CellCallback<TId>) "+Me+") "+Me,Xe(ee+b+" Id, and a "+h+" iterator"),i),k=e("TableIdForEachRowArray",`TId extends ${c} ? [tableId: TId, forEachRow: (rowCallback: ${S}<TId>)${Me}] : never`,$+" Ids and callback types",`<TId = ${c}>`,0),A=e($+le,`(...[tableId, forEachRow]: ${k})`+Me,Xe(ee+$+" Id, and a "+b+" iterator"),a),P=e("TableIdRowIdCellIdArray",`TId extends ${c} ? [tableId: TId, rowId: Id, cellId: ${v}<TId>] : never`,"Ids for GetCellChange",`<TId = ${c}>`,0),E=e("GetCellChange",`(...[tableId, rowId, cellId]: ${P}) => CellChange`,te+" returning information about any Cell's changes during a "+Ee),D=e(u+s,`(${d}, getCellChange: ${E}${Ce})`+Me,Ye(1)),O=e(p+s,`(${d})`+Me,Ye(2)),N=e($+s,`(${d}, tableId: ${c}, getCellChange: ${E}${Ce})`+Me,Ye(3)),j=e(C+s,`(${d}, tableId: ${c})`+Me,Ye(4,3)),M=e(m+s,"("+Rt(d,"tableId: "+c,"cellId: Id"+Ce,"descending: boolean","offset: number","limit: number"+Ce,"sortedRowIds: Ids")+")"+Me,Ye(13,3)),G=e(b+s,"("+Rt(""+d,"tableId: "+c,Te,`getCellChange: ${E}${Ce}`)+")"+Me,Ye(5,3)),z=e(g+s,"("+Rt(""+d,"tableId: "+c,Te)+")"+Me,Ye(6,5)),J=e("CellListenerArgsArrayInner",`CId extends ${v}<TId> ? [${d}, tableId: TId, ${Te}, cellId: CId, newCell: ${V}<TId, CId> ${Ce}, oldCell: ${V}<TId, CId> ${Ce}, getCellChange: ${E} ${Ce}] : never`,"Cell args for CellListener",`<TId extends ${c}, CId = ${v}<TId>>`,0),W=e("CellListenerArgsArrayOuter",`TId extends ${c} ? `+J+"<TId> : never","Table args for CellListener",`<TId = ${c}>`,0);return[r,I,c,f,w,y,T,v,V,R,S,A,D,O,N,j,M,G,z,e(h+s,`(...[${n}, tableId, rowId, cellId, newCell, oldCell, getCellChange]: ${W})`+Me,Ye(7,5)),e($e+h+s,`(${d}, tableId: Id, ${Te}, cellId: Id, invalidCells: any[])`+Me,Ye(8))]},(t,l)=>{const o=t+": "+l,d=e(w,St(...n(((e,t,l)=>`'${e}'${L(l)?"?":a}: ${t}`))),Ze(2,5)),r=e(w+Ge,St(...n(((e,t)=>`'${e}'?: ${t}`))),Ze(2,5,1)),I=e(f+ce,"keyof "+d,"A "+f+" Id in "+Ae),c=e(f,me+`<${d}[VId]>`,"A "+f+" Id in "+Ae,`<VId extends ${I}>`),i=e("ValueIdValueArray",`VId extends ${I} ? [valueId: VId, value: ${c}<VId>] : never`,f+" Ids and types in "+Ae,`<VId = ${I}>`,0),$=e(f+le,`(...[valueId, value]: ${i})`+Me,Xe(ee+f+" Id, and "+f)),u=e("GetValueChange",`(valueId: ${I}) => ValueChange`,te+" returning information about any Value's changes during a "+Ee),p=e(w+s,`(${o}, getValueChange: ${u}${Ce})`+Me,Ye(9)),b=e(y+s,`(${o})`+Me,Ye(10)),C=e("ValueListenerArgsArray",`VId extends ${I} ? [${o}, valueId: VId, newValue: ${c}<VId> ${Ce}, oldValue: ${c}<VId> ${Ce}, getValueChange: ${u} ${Ce}] : never`,"Value args for ValueListener",`<VId = ${I}>`,0);return[d,r,I,c,$,p,b,e(f+s,`(...[${t}, valueId, newValue, oldValue, getValueChange]: `+C+")"+Me,Ye(11)),e($e+f+s,`(${o}, valueId: Id, invalidValues: any[])`+Me,Ye(12))]},(t,a)=>e(Pe+s,`(${t}: ${a}, cellsTouched: boolean, valuesTouched: boolean)`+Me,te+" listening to the completion of a "+Ee)],zt=(e,t=a,l=a)=>`store.${e}(${t})`+(l?" as "+l:a),Jt=(e,t=a)=>`fluent(() => ${zt(e,t)})`,Wt=(e,t=a,l=a)=>`store.${e}(${t?t+", ":a}proxy(listener)${l?", "+l:a})`,Ft=(e,t,l)=>{const[o,I,T,v,x,R,S,k]=At(),[P,D,O]=Mt(e,t,x),[N,j,M]=Gt(T,P,D,O),z=_(),J=(e=0)=>Q(z,(([t,l,n,o,d],r)=>{const s=e?[r+`: ${d}(${t}): ${l} => ${n},`]:[r+d+`(${t}): ${l};`];return e||E(s,xt(o)),A(s,a),s})),W=(e,t,l,n,o,d=a)=>gt(z,e,[t,l,n,o,d]),B=(e,t,l,n,o,d=a,r=a,s=a)=>W(It[e]+t+(4==e?he:a)+l,d,n,(n==X?Jt:zt)(It[e]+(4==e?he:a)+l,r,e?void 0:n),o,s),U=(e,t,l,n=a,o=a,d=1,r=a)=>W(c+e+s,(n?n+", ":a)+pe+": "+t+(d?", mutator?: boolean":a),ce,Wt(c+e+s,o,d?"mutator":a),l,r),K=`./${vt(l)}.d`,X=vt(l,1),Y=vt(X),ee=[],te=_();let ae=[],ne=[];if(I(1,K,X,`create${X} as create${X}Decl`),!jt(e)){I(0,"tinybase","CellChange"),I(null,"tinybase",i);const[e,t,l,o,s,c,f,w,y,v,R,S,k,E,O,j,M,z,J,W,H]=N(Y,X),Q=_();P(((e,t)=>{const a=`<'${e}'>`,l=[T(t+$,o+a,ye+` the '${e}' `+$),T(t+$+Ge,s+a,ye+` the '${e}' `+$+ze),T(t+b,c+a,He(e)),T(t+b+Ge,f+a,He(e,1)),T(t+h+ce,w+a,`A Cell Id for the '${e}' `+$),T(t+h+le,v+a,Xe(`a Cell Id and value from a Row in the '${e}' `+$)),T(t+b+le,R+a,Xe(`a Row Id from the '${e}' Table, and a Cell iterator`))];q(Q,e,l),I(1,K,...l)})),I(1,K,e,t,l,w,S,k,E,O,j,M,z,J,W,H),ae=[e,t,l,w,k,E,O,j,M,z,J,W,Q],V([[e],[n],[X,"tables: "+t,"tables"],[X]],(([e,t,l],n)=>B(n,a,u,e,Ze(1,n),t,l))),B(0,a,p,l+Se,Qe($,Ae)),B(5,a,$,Le,qe($,Ae),"tableCallback: "+S,"tableCallback as any"),P(((e,t,l)=>{const[o,d,r,s,I,c,u]=Z(Q,e);V([[o],[n],[X,"table: "+d,", table"],[X]],(([n,o,d=a],r)=>B(r,t,$,n,nt(e,r),o,l+d))),B(0,t,C,i,Qe(b,tt(e)),a,l),B(0,t,m,i,Qe(b,tt(e),1),"cellId?: "+I+Re,l+", cellId, descending, offset, limit"),B(5,t,b,Le,qe(b,tt(e)),"rowCallback: "+u,l+", rowCallback as any"),V([[r],[n],[X,", row: "+s,", row"],[X],[X,", partialRow: "+s,", partialRow"]],(([n,o=a,d=a],r)=>B(r,t,b,n,ot(e,r),Te+o,l+", rowId"+d))),B(6,t,b,ce+Ce,"Add a new Row to "+tt(e),"row: "+s,l+", row"),B(0,t,g,I+Se,Qe(h,at(e)),Te,l+", rowId"),B(5,t,h,Le,qe(h,at(e)),Te+", cellCallback: "+c,l+", rowId, cellCallback as any"),D(e,((o,d,r,s,I)=>{const c="Map"+vt(d,1);q(te,d,c);const i=d+(L(r)?Ce:a);V([[i],[n],[X,`, cell: ${d} | `+c,", cell as any"],[X]],(([n,d=a,r=a],c)=>B(c,t+I,h,n,dt(e,o,c),Te+d,l+", rowId, "+s+r)))}))})),B(0,a,u+ue,ue,Ze(1,6)),B(2,a,u+ue,X,Ze(1,7),"tablesJson: "+ue,"tables"+ue),U(u,k,Ze(1,8)+" changes"),U(p,E,et(2,0,1)),U($,O,et(3,0),`tableId: ${l} | null`,"tableId"),U(C,j,et(4,3,1),`tableId: ${l} | null`,"tableId"),U(m,M,et(13,3,1),Rt("tableId: TId",`cellId: ${w}<TId>`+Ce,"descending: boolean","offset: number","limit: number"+Ce),Rt("tableId","cellId","descending","offset","limit"),1,"<TId extends TableId>"),U(b,z,et(5,3),`tableId: ${l} | null, rowId: IdOrNull`,"tableId, rowId"),U(g,J,et(6,5,1),`tableId: ${l} | null, rowId: IdOrNull`,"tableId, rowId"),U(h,W,et(7,5),`tableId: ${l} | null, rowId: IdOrNull, cellId: ${yt(P((e=>Z(Q,e)?.[4]??a))," | ")} | null`,"tableId, rowId, cellId"),U($e+h,H,we+" whenever an invalid Cell change was attempted","tableId: IdOrNull, rowId: IdOrNull, cellId: IdOrNull","tableId, rowId, cellId"),I(1,K,...F(te)),A(ee,".set"+u+Ve+"({",Tt(P(((e,t,l)=>[`[${l}]: {`,...D(e,((e,t,l,n)=>`[${n}]: {[${x(Vt(d),`'${d}'`)}]: ${x(Vt(t),`'${t}'`)}${L(l)?a:`, [${x(Vt(r),`'${r}'`)}]: `+(G(l)?x(Vt(l),`'${l}'`):l)}},`)),"},"]))),"})")}if(!jt(t)){const[e,t,l,o,s,c,i,$,u]=j(Y,X);I(1,K,e,t,l,s,c,i,$,u),ne=[e,t,l,c,i,$],V([[e],[n],[X,"values: "+t,"values"],[X],[X,"partialValues: "+t,"partialValues"]],(([e,t,l],n)=>B(n,a,w,e,Ze(2,n),t,l))),B(0,a,y,l+Se,Qe(f,Ae)),B(5,a,f,"void",qe(f,Ae),"valueCallback: "+s,"valueCallback as any"),O(((e,t,l,o,d)=>{const r="Map"+vt(t,1);q(te,t,r),V([[t],[n],[X,`value: ${t} | `+r,", value as any"],[X]],(([t,l,n=a],r)=>B(r,d,f,t,rt(e,r),l,o+n)))})),B(0,a,w+ue,ue,Ze(2,6)),B(2,a,w+ue,X,Ze(2,7),"valuesJson: "+ue,"values"+ue),U(w,c,Ze(2,8)+" changes"),U(y,i,et(10,0,1)),U(f,$,et(11,0),`valueId: ${l} | null`,"valueId"),U($e+f,u,we+" whenever an invalid Value change was attempted","valueId: IdOrNull","valueId"),I(1,K,...F(te)),I(0,"tinybase","ValueChange"),A(ee,".set"+w+Ve+"({",O(((e,t,l,n)=>[`[${n}]: {[${x(Vt(d),`'${d}'`)}]: ${x(Vt(t),`'${t}'`)}${L(l)?a:`, [${x(Vt(r),`'${r}'`)}]: `+(G(l)?x(Vt(l),`'${l}'`):l)}},`])),"})")}H(te,((e,t)=>T(t,`(cell: ${e}${Ce}) => `+e,`Takes a ${e} Cell value and returns another`))),I(null,"tinybase","DoRollback",ce,"IdOrNull",ue,"Store"),B(0,a,ue,ue,Ze(0,6)),B(2,a,ue,X,Ze(0,7),"tablesAndValuesJson: "+ue,"tablesAndValuesJson"),B(7,a,Ee,"Return",De,se,"actions, doRollback","<Return>"),B(7,a,"start"+Pe,X,Oe),B(7,a,"finish"+Pe,X,Ne,re,"doRollback");const oe=M(Y,X);return U("WillFinish"+Pe,oe,we+" just before "+je,a,a,0),U("DidFinish"+Pe,oe,we+" just after "+je,a,a,0),B(7,a,"call"+s,X,"Manually provoke a listener to be called","listenerId: Id","listenerId"),B(3,a,s,X,"Remove a listener that was previously added to "+Ae,"listenerId: Id","listenerId"),W("getStore",a,"Store","store",st[0]+" the underlying Store object"),I(1,"tinybase","createStore"),I(1,K,X,`create${X} as create${X}Decl`,oe),x("store",["createStore()",...ee]),v("fluent","actions: () => Store",["actions();",`return ${Y};`]),v("proxy","listener: any",`(_: Store, ...params: any[]) => listener(${Y}, ...params)`),x(Y,["{",...J(1),"}"]),[o(...R(0),...S(),Ie+" interface "+X+" {",...J(0),"}",a,xt(`Creates a ${X} object`),Ie+" function create"+X+"(): "+X+";"),o(...R(1),Ie+" const create"+X+": typeof create"+X+"Decl = () => {",...k(),`return Object.freeze(${Y});`,"};"),ae,ne]},Bt=e=>I+e,Ut=e=>Rt(Bt(e),Bt(e)+oe),_t="debugIds?: boolean",Zt="debugIds={debugIds}",Ht="then"+de,Qt="Parameter",qt=": (parameter: "+Qt+", store: Store) => ",Kt="const contextValue = useContext(Context);",Xt=", based on a parameter",Yt=": ",ea="<"+Qt+",>",ta=Qt+"ized"+le+"<"+Qt+">",aa="rowId",la="rowId={rowId}",na=", separator, debugIds",oa="separator?: ReactElement | string",da="then?: (store: Store",ra=Rt(da+")"+Me,Ht),sa="then, then"+oe,Ia=aa+Yt+ce,ca="View",ia=(e,...t)=>Rt(...t,pe+": "+e,pe+de,"mutator?: boolean"),$a=(...e)=>Rt(...e,pe,pe+oe,"mutator"),ua=(e,t,l,n,o)=>{const[d,r,I,c,T,v,V,x]=At(),[R,S,k]=Mt(e,t,T),P=`./${vt(l)}.d`,D=`./${vt(l)}-ui-react.d`,O="tinybase/ui-react",N=vt(l,1),j=vt(N),M=N+"Or"+N+ce,G=j+"Or"+N+ce,z=j+`={${j}}`,J=_(),W=(e,t,l,n,o,d=a)=>(r(1,D,e+" as "+e+"Decl"),gt(J,e,[t,l,n,o,d])),F=(e,t,l,n,o,d=a)=>W("use"+e,t,l,n,o,d),B=(e,t,l,n,o=a,d=a,s=a,I=a,c=a)=>(r(1,O,`use${t} as use${t}Core`),F(e,Rt(o,X,I),l,te+`(${G}, use${t}Core, [`+(d||a)+(c?"], ["+c:a)+"]);",n,s)),U=(e,t,a,l)=>W(e,t,1,a,l),H=(e=0)=>Q(J,(([t,l,n,o,d],r)=>{const s=e?[Ie+` const ${r}: typeof ${r}Decl = ${d}(${t}): ${1==l?"any":l} =>`,n]:[Ie+` function ${r}${d}(${t}): ${1==l?"ComponentReturnType":l};`];return e||E(s,xt(o)),A(s,a),s}));r(null,"tinybase",ce,"Store",le,Qt+"ized"+le),r(0,O,"ComponentReturnType"),r(null,O,"ExtraProps"),r(0,P,N);const q=I(M,N+" | "+ce,`Used when you need to refer to a ${N} in a React hook or component`),K=I(fe+ge,kt(j+be+N,j+`ById?: {[${j}Id: Id]: ${N}}`),`Used with the ${fe} component, so that a `+N+" can be passed into the context of an application");r(0,"react","ReactElement","ComponentType"),r(1,"react","React"),r(1,D,q,K);const X=G+be+q;T("{createContext, useContext, useMemo}","React"),T("Context",`createContext<[${N}?, {[${j}Id: Id]: ${N}}?]>([])`),F("Create"+N,`create: () => ${N}, create`+de,N,"\n// eslint-disable-next-line react-hooks/exhaustive-deps\nuseMemo(create, createDeps)",`Create a ${N} within a React application with convenient memoization`);const Y=F(N,"id?: Id",N+Ce,["{",Kt,"return id == null ? contextValue[0] : contextValue[1]?.[id];","}"],`Get a reference to a ${N} from within a ${fe} component context`),te=c("useHook",G+`: ${q} | undefined, hook: (...params: any[]) => any, preParams: any[], postParams: any[] = []`,[`const ${j} = ${Y}(${G} as Id);`,`return hook(...preParams, ((${G} == null || typeof ${G} == 'string')`,`? ${j} : ${G})?.getStore(), ...postParams)`]),oe=c("getProps","getProps: ((id: any) => ExtraProps) | undefined, id: Id","(getProps == null) ? ({} as ExtraProps) : getProps(id)"),re=c("wrap",Rt("children: any","separator?: any","encloseWithId?: boolean","id?: Id"),["const separated = separator==null || !Array.isArray(children)"," ? children"," : children.map((child, c) => (c > 0 ? [separator, child] : child));","return encloseWithId ? [id, ':{', separated, '}'] : separated;"]),se=T("NullComponent","() => null");if(!jt(e)){const[e,t,l,o,d,f,w,y,T,v,V,x,k]=n;r(null,P,e,t,l,d,f,w,y,T,v,V,x),r(0,P,o),r(1,P,N),r(null,"tinybase",i,"IdOrNull");const A=c("tableView",`{${j}, rowComponent, getRowComponentProps`+na+"}: any, rowIds: Ids, tableId: Id, defaultRowComponent: React.ComponentType<any>",["const Row = rowComponent ?? defaultRowComponent;",`return ${re}(rowIds.map((rowId) => (`,"<Row","{..."+oe+"(getRowComponentProps, rowId)}","key={rowId}","tableId={tableId}",la,z,Zt,"/>","))",na,", tableId,",");"]),E=c("getDefaultTableComponent","tableId: Id",yt(R(((e,t,a)=>`tableId == ${a} ? ${t}TableView : `)))+se),O=c("getDefaultCellComponent","tableId: Id, cellId: Id",yt(R(((e,t,a)=>`tableId == ${a} ? ${yt(S(e,((e,a,l,n,o)=>`cellId == ${n} ? `+t+o+"CellView : ")))+se} : `)))+se);B(u,u,e,Ze(1,0)+ae);const M=B(p,p,l+Se,Qe($,Ae)+ae);B(xe+u+le,xe+u+le,ta,Ze(1,9)+Xt,Rt(Bt(u)+qt+t,Bt(u)+de),Ut(u),ea,Rt(da,`tables: ${t})`+Me,Ht),sa),B(ne+u+le,ne+u+le,le,Ze(1,12),a,a,a,ra,sa);const G=I(h+ge,kt("tableId?: TId","rowId: Id","cellId?: CId",j+be+N,_t),Ke(ee+h),`<TId extends ${l}, CId extends ${o}<TId>>`),J=I(b+ge,kt("tableId?: TId","rowId: Id",j+be+N,"cellComponents?: {readonly [CId in "+o+`<TId>]?: ComponentType<${G}<TId, CId>>;}`,`getCellComponentProps?: (cellId: ${o}<TId>) => ExtraProps`,oa,_t),Ke(ee+b),`<TId extends ${l}>`),W=I($+ge,kt("tableId?: TId",j+be+N,`rowComponent?: ComponentType<${J}<TId>>`,"getRowComponentProps?: (rowId: Id) => ExtraProps",oa,_t),Ke(ee+$),`<TId extends ${l}>`),F=I("Sorted"+$+ge,kt("tableId?: TId","cellId?: "+o+"<TId>","descending?: boolean","offset?: number","limit?: number",j+be+N,`rowComponent?: ComponentType<${J}<TId>>`,"getRowComponentProps?: (rowId: Id) => ExtraProps",oa,_t),Ke(ee+"sorted "+$),`<TId extends ${l}>`),_=I(u+ge,kt(j+be+N,"tableComponents?: {readonly [TId in "+l+`]?: ComponentType<${W}<TId>>;}`,`getTableComponentProps?: (tableId: ${l}) => ExtraProps`,oa,_t),Ke(_e(1,1)));r(1,D,_,W,F,J,G),U(u+ca,"{"+j+", tableComponents, getTableComponentProps"+na+"}: "+_,[re+`(${M}(${j}).map((tableId) => {`,"const Table = (tableComponents?.[tableId] ?? "+E+"(tableId)) as React.ComponentType<TableProps<typeof tableId>>;","return <Table",`{...${oe}(getTableComponentProps, tableId)}`,"tableId={tableId}","key={tableId}",z,Zt,"/>;","}), separator)"],Ze(1,13)+ae),R(((e,t,l)=>{const[n,o,d,s,I]=Z(k,e);r(null,P,n,o,d,s,I),B(t+$,$,n,nt(e)+ae,a,l);const c=B(t+C,C,i,Qe(b,tt(e))+ae,a,l),u=B(t+m,m,i,Qe(b,tt(e),1)+ae,"cellId?: "+I+", descending?: boolean, offset?: number, limit?: number",l+", cellId, descending, offset, limit");B(t+b,b,d,ot(e)+ae,Ia,Rt(l,aa));const p=B(t+g,g,I+Se,Qe(h,at(e))+ae,Ia,Rt(l,aa));B(xe+t+$+le,xe+$+le,ta,nt(e,9)+Xt,Rt(Bt($)+qt+o,Bt($)+de),Rt(l,Ut($)),ea,Rt(da,`table: ${o})`+Me,Ht),sa),B(ne+t+$+le,ne+$+le,le,nt(e,12),a,l,a,ra,sa),B(xe+t+b+le,xe+b+le,ta,ot(e,9)+Xt,Rt(Ia,Bt(b)+qt+s,Bt(b)+de),Rt(l,aa,Ut(b)),ea,Rt(da,`row: ${s})`+Me,Ht),sa),B("Add"+t+b+le,"Add"+b+le,ta,ot(e,10)+Xt,Rt(Bt(b)+qt+s,Bt(b)+de),Rt(l,Ut(b)),ea,"then?: ("+Rt(Ia+Ce,"store: Store","row: "+s+")"+Me,"then"+de),sa),B(xe+t+he+b+le,xe+he+b+le,ta,ot(e,11)+Xt,Rt(Ia,Bt(he+b)+qt+s,Bt(he+b)+de),Rt(l,aa,Ut(he+b)),ea,Rt(da,`partialRow: ${s})`+Me,Ht),sa),B(ne+t+b+le,ne+b+le,le,ot(e,12),Ia,Rt(l,aa),a,ra,sa);const f=U(t+b+ca,"{rowId, "+j+", cellComponents, getCellComponentProps"+na+`}: ${J}<'${e}'>`,[re+`(${p}(rowId, ${j}).map((cellId) => {`,"const Cell = (cellComponents?.[cellId] ?? "+O+`(${l}, cellId)) as React.ComponentType<CellProps<typeof `+l+", typeof cellId>>;","return <Cell",`{...${oe}(getCellComponentProps, cellId)} `,"key={cellId}",`tableId={${l}}`,la,"cellId={cellId}",z,Zt,"/>;","})"+na+", rowId)"],ot(e,13)+ae);U(t+"Sorted"+$+ca,"{cellId, descending, offset, limit, ...props}: "+F+`<'${e}'>`,A+"(props, "+u+`(cellId, descending, offset, limit, props.${j}), ${l}, ${f});`,nt(e,13)+", sorted"+ae),U(t+$+ca,`props: ${W}<'${e}'>`,A+"(props, "+c+`(props.${j}), ${l}, ${f});`,nt(e,13)+ae),S(e,((n,o,d,s,I)=>{const c="Map"+vt(o,1);r(0,P,c),r(1,P,c);const i=B(t+I+h,h,o+(L(d)?Ce:a),dt(e,n)+ae,Ia,Rt(l,aa,s));B(xe+t+I+h+le,xe+h+le,ta,dt(e,n,9)+Xt,Rt(Ia,Bt(h)+qt+o+" | "+c,Bt(h)+de),Rt(l,aa,s,Ut(h)),ea,Rt(da,`cell: ${o} | ${c})`+Me,Ht),sa),B(ne+t+I+h+le,ne+h+le,le,dt(e,n,12),Rt(Ia,"forceDel?: boolean"),Rt(l,aa,s,"forceDel"),a,ra,sa),U(t+I+h+ca,`{rowId, ${j}, debugIds}: `+G+`<'${e}', '${n}'>`,[re+`('' + ${i}(rowId, `+j+`) ?? '', undefined, debugIds, ${s})`],dt(e,n,13)+ae)}))}));const H=yt(R((e=>Z(k,e)?.[4]??a))," | ");B(u+s,u+s,Le,Ze(1,8)+" changes",ia(d),$a()),B(p+s,p+s,Le,et(2,0,1),ia(f),$a()),B($+s,$+s,Le,et(3,0),ia(w,`tableId: ${l} | null`),$a("tableId")),B(C+s,C+s,Le,et(4,3,1),ia(y,`tableId: ${l} | null`),$a("tableId")),B(m+s,m+s,Le,et(13,3,1),ia(T,`tableId: ${l} | null`,"cellId: "+H+Ce,"descending: boolean","offset: number","limit: number"+Ce),$a("tableId","cellId","descending","offset","limit")),B(b+s,b+s,Le,et(5,3),ia(v,`tableId: ${l} | null`,aa+": IdOrNull"),$a("tableId",aa)),B(g+s,g+s,Le,et(6,5,1),ia(V,`tableId: ${l} | null`,aa+": IdOrNull"),$a("tableId",aa)),B(h+s,h+s,Le,et(7,5),ia(x,`tableId: ${l} | null`,aa+": IdOrNull",`cellId: ${H} | null`),$a("tableId",aa,"cellId"))}if(!jt(t)){const[e,t,l,n,d,i]=o;r(null,P,...o),r(1,P,N);const $=c("getDefaultValueComponent","valueId: Id",yt(k(((e,t,a,l,n)=>`valueId == ${l} ? `+n+"ValueView : ")))+se);B(w,w,e,Ze(2,0)+ae);const u=B(y,y,l+Se,Qe(f,Ae)+ae);B(xe+w+le,xe+w+le,ta,Ze(2,9)+Xt,Rt(Bt(w)+qt+t,Bt(w)+de),Ut(w),ea,Rt(da,`values: ${t})`+Me,Ht),sa),B(xe+he+w+le,xe+he+w+le,ta,Ze(2,11)+Xt,Rt(Bt(he+w)+qt+t,Bt(he+w)+de),Ut(he+w),ea,Rt(da,`partialValues: ${t})`+Me,Ht),sa),B(ne+w+le,ne+w+le,le,Ze(2,12),a,a,a,ra,sa);const p=I(f+ge,kt("valueId?: VId",j+be+N,_t),Ke("a Value"),`<VId extends ${l}>`),b=I(w+ge,kt(j+be+N,"valueComponents?: {readonly [VId in "+l+`]?: ComponentType<${p}<VId>>;}`,`getValueComponentProps?: (valueId: ${l}) => ExtraProps`,oa,_t),Ke(_e(2,1)));r(1,D,b,p),U(w+ca,"{"+j+", valueComponents, getValueComponentProps"+na+"}: "+b,[re+`(${u}(${j}).map((valueId) => {`,"const Value = valueComponents?.[valueId] ?? "+$+"(valueId);","return <Value",`{...${oe}(getValueComponentProps, valueId)}`,"key={valueId}",z,Zt,"/>;","}), separator)"],Ze(2,13)+ae),k(((e,t,l,n,o)=>{const d="Map"+vt(t,1);r(0,P,d),r(1,P,d);const s=B(o+f,f,t,rt(e)+ae,a,n);B(xe+o+f+le,xe+f+le,ta,rt(e,9)+Xt,Rt(Bt(f)+qt+t+" | "+d,Bt(f)+de),Rt(n,Ut(f)),ea,Rt(da,`value: ${t} | ${d})`+Me,Ht),sa),B(ne+o+f+le,ne+f+le,le,rt(e,12),a,n,a,ra,sa),U(o+f+ca,`{${j}, debugIds}: ${p}<'${e}'>`,[re+`('' + ${s}(`+j+`) ?? '', undefined, debugIds, ${n})`],rt(e,13)+ae)})),B(w+s,w+s,Le,Ze(2,8)+" changes",ia(n),$a()),B(y+s,y+s,Le,et(10,0,1),ia(d),$a()),B(f+s,f+s,Le,et(11,0),ia(i,`valueId: ${l} | null`),$a("valueId"))}return U(fe,`{${j}, ${j}ById, children}: `+K+" & {children: React.ReactNode}",["{",Kt,"return (","<Context."+fe,"value={useMemo(",`() => [${j} ?? contextValue[0], {...contextValue[1], ...${j}ById}],`,`[${j}, ${j}ById, contextValue],`,")}>","{children}",`</Context.${fe}>`,");","}"],"Wraps part of an application in a context that provides default objects to be used by hooks and components within"),[d(...v(0),...V(),...H(0)),d(...v(1),...x(),...H(1))]},pa=(e,t,l)=>{if(jt(e)&&jt(t))return[a,a,a,a];const[n,o,d,r]=Ft(e,t,l);return[n,o,...ua(e,t,l,d,r)]},ba=". Note that this may contradict the generated type refinements",Ca=(e,t,l)=>{const[o,d,r,T,v,x,R]=At(),[S,k,P]=Mt(e,t,(()=>a)),[E,D,O]=Gt(r,S,k,P),N=_(),j=()=>Q(N,(([e,t,l,n],o)=>[xt(l),o+n+`(${Rt(...e)}): ${t};`,a])),L=(e,t,l,n,o=a)=>gt(N,e,[z(t)?t:[t],l,n,o]);let M;d(0,"tinybase",ce,i,ie,"StoreListenerStats",ue,u+Ve,w+Ve,"DoRollback"),jt(e)?(M=[u,u,ce,$,$,b,b,ce,h,h+le,b+le,$+le,u+s,p+s,$+s,C+s,m+s,b+s,g+s,h+s,$e+h+s],d(0,"tinybase",...M),A(M,ce,ie,ce,a,ce,a)):(d(0,"tinybase","CellChange"),M=E("store",ke),V([3,4,5,6,7,9,10],(e=>M[e]+="<TId>")),M[8]+="<TId, CId>",A(M,"TId","TId | null",yt(S((e=>`CellId<'${e}'>`))," | "),`<TId extends ${M[2]}>`,"CId",`<TId extends ${M[2]}, CId extends ${M[7]}>`));const[G,J,W,F,B,U,Z,H,q,K,X,Y,te,ae,ne,oe,de,Ie,be,me,ge,fe,ye,xe,Me,Ge,ze]=M,Je="tableId: "+fe,We=Rt(Je,Te),Fe=Rt(We,"cellId: "+Ge),Be="tableId: "+ye,Ue=Rt(Be,ve),_e=Rt(Ue,"cellId: "+xe);let He;V([[G],[n],[ke,"tables: "+J],[ke]],(([e,t],l)=>L(It[l]+u,t??a,e,Ze(1,l)))),L(I+p,a,W+Se,Qe($,Ae)),L(It[5]+$,"tableCallback: "+Y,Le,qe($,Ae)),V([[F,Je],[n,Je],[ke,[Je,"table: "+B]],[ke,Je]],(([e,t],l)=>L(It[l]+$,t??a,e,lt(l,3),Me))),L(I+C,Je,i,Qe(b,ee+$),Me),L(I+m,[Je,"cellId?: "+H+Re],i,Qe(b,ee+$),Me),L(It[5]+b,[Je,"rowCallback: "+X],Le,qe(b,ee+$),Me),V([[U,We],[n,We],[ke,[We,"row: "+Z]],[ke,We]],(([e,t],l)=>L(It[l]+b,t??a,e,lt(l,5),Me))),L("set"+he+b,[Je,Te,"partialRow: "+Z],ke,lt(4,5),Me),L(c+b,[Je,"row: "+Z],ce+Ce,"Add a new "+b,Me),L(I+g,[Je,Te],H+Se,Qe(h,ee+b),Me),L(It[5]+h,[Je,Te,"cellCallback: "+K],Le,qe(h,ee+b),Me),V([[q,Fe],[n,Fe],[ke,[Fe,"cell: "+q]],[ke,Fe]],(([e,t],l)=>L(It[l]+h,t??a,e,lt(l,7),ze))),L(c+u+s,[pe+": "+te,"mutator?: boolean"],ce,Ze(1,8)+" changes"),L(c+p+s,[pe+": "+ae,"mutator?: boolean"],ce,et(2,0,1)),L(c+$+s,[Be,pe+": "+ne,"mutator?: boolean"],ce,et(3,0),Me),L(c+C+s,[Be,pe+": "+oe,"mutator?: boolean"],ce,et(4,3,1),Me),L(c+m+s,[Je,"cellId: "+H+Ce,"descending: boolean","offset: number","limit: number"+Ce,pe+": "+de,"mutator?: boolean"],ce,et(13,3,1),Me),L(c+b+s,[Ue,pe+": "+Ie,"mutator?: boolean"],ce,et(5,3),Me),L(c+g+s,[Ue,pe+": "+be,"mutator?: boolean"],ce,et(6,5,1),Me),L(c+h+s,[_e,pe+": "+me,"mutator?: boolean"],ce,et(7,5),Me),L(c+$e+h+s,["tableId: "+ie,"rowId: "+ie,"cellId: "+ie,pe+": "+ge,"mutator?: boolean"],ce,we+" whenever an invalid Cell change was attempted"),jt(t)?(He=[w,w,ce,f,f+le,w+s,y+s,f+s,$e+f+s],d(0,"tinybase",...He),A(He,ce,ie,a)):(d(0,"tinybase","ValueChange"),He=D("store",ke),He[3]+="<VId>",A(He,"VId","VId | null",`<VId extends ${He[2]}>`));const[Ke,Xe,Ye,tt,at,nt,ot,dt,rt,st,ct,it]=He,$t="valueId: "+st;V([[Ke],[n],[ke,"values: "+Xe],[ke]],(([e,t],l)=>L(It[l]+w,t??a,e,Ze(2,l)))),L("set"+he+w,"partialValues: "+Xe,ke,Ze(2,4)),L(I+y,a,Ye+Se,Qe(f,Ae)),L(It[5]+f,"valueCallback: "+at,Le,qe(f,Ae)),V([[tt,$t],[n,$t],[ke,[$t,"value: "+tt]],[ke,$t]],(([e,t],l)=>L(It[l]+f,t??a,e,lt(l,11),it))),L(c+w+s,[pe+": "+nt,"mutator?: boolean"],ce,Ze(2,8)+" changes"),L(c+y+s,[pe+": "+ot,"mutator?: boolean"],ce,et(10,0,1)),L(c+f+s,["valueId: "+ct,pe+": "+dt,"mutator?: boolean"],ce,et(11,0),it),L(c+$e+f+s,["valueId: "+ie,pe+": "+rt,"mutator?: boolean"],ce,we+" whenever an invalid Value change was attempted"),V([[a,"tablesAndValues"],[u,"tables"],[w,"values"]],(([e,t],l)=>{L(I+e+ue,a,ue,Ze(l,6)),L("set"+e+ue,t+ue+": "+ue,ke,Ze(l,7)),L(I+e+Ve+ue,a,ue,Ze(l,14)),e&&L("set"+e+Ve,t+Ve+": "+e+Ve,ke,Ze(l,15)+ba),L("del"+e+Ve,a,ke,Ze(l,16))})),L("set"+Ve,[`tables${Ve}: `+u+Ve,`values${Ve}?: `+w+Ve],ke,Ze(0,15)+ba),L(Ee,se,"Return",De,"<Return>"),L("start"+Pe,a,ke,Oe),L("finish"+Pe,re,ke,Ne);const ut=O("store",ke);return L(c+"WillFinish"+Pe+s,pe+": "+ut,ce,we+" just before "+je),L(c+"DidFinish"+Pe+s,pe+": "+ut,ce,we+" just after "+je),L("call"+s,"listenerId: Id",ke,"Manually provoke a listener to be called"),L("del"+s,"listenerId: Id",ke,"Remove a listener that was previously added to "+Ae),L(I+s+"Stats",a,"StoreListenerStats","Get listener statistics"),[o("export * from 'tinybase';",...x(0),...R(),"export interface Store {",...j(),"}",a,xt("Creates a Store object"),"export function createStore(): Store"),[...M,...He]]},ma=(e,t,l,n)=>{const[o,d,r,s,I,c,i]=At(),$=`./${vt(l)}-refinement.d`,p=_(),b=(e,t,l,n,o=a)=>gt(p,e,[t,l,n,o]),C=(e,t,l,n,o=a)=>b("use"+e,t,l,n,o),m=()=>Q(p,(([e,t,l,n],o)=>[xt(l),Ie+` function ${o}${n}(${e}): ${1==t?"ComponentReturnType":t};`,a])),[h,g,f,w,y,T,v,V,x,R,S,k,A,P,E,D,O,N,j,L,M,G,z,J,W,F,B,U,Z,H,q,K,X,Y,ee,te,le,ne,oe]=n;d(0,$,ke,ce);const re=r("StoreOrStoreId",ke+" | "+ce,"Used when you need to refer to a Store in a React hook or component");C("Create"+ke,`create: () => ${ke}, create`+de,ke,`Create a ${ke} within a React application with convenient memoization`);const se="storeOrStoreId"+be+re;return jt(e)?d(0,"tinybase",h):d(0,$,h),C(u,se,h,Ze(1,0)+ae),[o("export * from 'tinybase/ui-react';",...c(0),...i(),...m())]},ha=(e,t,l)=>{if(jt(e)&&jt(t))return[a,a];const[n,o]=Ca(e,t);return[n,...ma(e,t,l,o)]},ga={parser:"typescript",singleQuote:!0,trailingComma:"all",bracketSpacing:!1,jsdocSingleLineComment:!1},fa=async()=>{try{return(await import("prettier")).format}catch(e){return e=>e}},wa=Lt((e=>{const t=()=>{const t=O(e.getTablesSchemaJson());return!jt(t)||T(e.getTableIds(),(a=>{const l=e.getRowIds(a),n=_();if(T(l,(t=>T(e.getCellIds(a,t),(l=>{const o=e.getCell(a,t,l),d=K(n,l,(()=>[J(o),_(),[0],0])),[r,s,[I]]=d,c=K(s,o,(()=>0))+1;return c>I&&(d[2]=[c,o]),q(s,o,c),d[3]++,r==J(o)})))))return t[a]={},B(n,(([e,,[,n],o],s)=>{t[a][s]={[d]:e,...o==R(l)?{[r]:n}:{}}})),1}))?t:{}},a=()=>{const t=O(e.getValuesSchemaJson());return jt(t)&&e.forEachValue(((e,a)=>{t[e]={[d]:J(a)}})),t},l=e=>pa(t(),a(),e),n=async e=>{const t=["d.ts","ts","d.ts","tsx"],a=await fa();return x(l(e),((e,l)=>ft(a(e,{...ga,filepath:"_."+t[l]}))))},o=e=>ha(t(),a(),e),s=async e=>{const t=await fa();return x(o(e),(e=>ft(t(e,{...ga,filepath:"_.d.ts"}))))};return Dt({getStoreStats:t=>{let a=0,l=0,n=0;const o={};return e.forEachTable(((e,d)=>{a++;let r=0,s=0;const I={};d(((e,a)=>{r++;let l=0;a((()=>l++)),s+=l,t&&(I[e]={rowCells:l})})),l+=r,n+=s,t&&(o[e]={tableRows:r,tableCells:s,rows:I})})),{totalTables:a,totalRows:l,totalCells:n,totalValues:R(e.getValueIds()),jsonLength:wt(e.getJson()),...t?{detail:{tables:o}}:{}}},getStoreTablesSchema:t,getStoreValuesSchema:a,getStoreApi:l,getPrettyStoreApi:n,getStoreRefinement:o,getPrettyStoreRefinement:s,getStore:()=>e})}));e.createTools=wa},"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).TinyBaseTools={});
