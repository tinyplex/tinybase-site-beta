<nav><ul><li><a href="/">TinyBase</a></li><li><a href="/api/">API</a></li><li><a href="/api/tools/"><code>tools</code></a></li><li><a href="/api/tools/interfaces/">Interfaces</a></li><li><a href="/api/tools/interfaces/tools/tools/"><code>Tools</code></a></li><li><a href="/api/tools/interfaces/tools/tools/methods/modelling/">Modelling methods</a></li><li><a href="/api/tools/interfaces/tools/tools/methods/modelling/getstorerefinement/"><code>getStoreRefinement</code></a></li></ul></nav><section class="s1" id="/api/tools/interfaces/tools/tools/methods/modelling/getstorerefinement/" data-id="gSR"><h1><code>getStoreRefinement</code></h1><p>The <code>getStoreRefinement</code> method returns code-generated <code>.d.ts</code> files that refine the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> and React bindings to have schema-specific methods and types.</p><pre><code><span class="function"><a href="/api/tools/interfaces/tools/tools/methods/modelling/getstorerefinement/">getStoreRefinement</a></span><span class="punctuation">(</span>storeName<span class="operator">:</span> <span class="builtin">string</span><span class="punctuation">)</span><span class="operator">:</span> <span class="punctuation">[</span><span class="builtin">string</span><span class="punctuation">,</span> <span class="builtin">string</span><span class="punctuation">]</span></code></pre><div class="table"><table><tr><th></th><th>Type</th><th>Description</th></tr><tr><th><code>storeName</code></th><td><code><span class="builtin">string</span></code></td><td><p>The name you want to provide to the generated <a href="/api/store/interfaces/store/store/"><code>Store</code></a>, which should also be used to save the <code>.d.ts</code> files.</p></td></tr><tr><th class="right">returns</th><td><code><span class="punctuation">[</span><span class="builtin">string</span><span class="punctuation">,</span> <span class="builtin">string</span><span class="punctuation">]</span></code></td><td><p>A pair of strings representing the contents of the `.d.ts` files for the generated Store and React modules.</p></td></tr></table></div><p>If the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> does not already have an explicit <a href="/api/store/type-aliases/schema/tablesschema/"><code>TablesSchema</code></a> or <a href="/api/store/type-aliases/schema/valuesschema/"><code>ValuesSchema</code></a> associated with it, the data in the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> will be scanned to attempt to infer new schemas. The method returns two strings (which should be saved as files) though if no schema can be inferred, the strings will be empty.</p><p>The method takes a single argument which represents the name you want the generated store object to have in code. You are expected to save the two files yourself, as, respectively:</p><ul><li><code>[storeName]-refinement.d.ts</code></li><li><code>[storeName]-ui-react-refinement.d.ts</code></li></ul><p>You should save these alongside each other.</p><p>The <code>.d.ts</code> files that are generated are designed to resemble the main <a href="/">TinyBase</a> <a href="/api/store/interfaces/store/store/"><code>Store</code></a> and React binding files. In your application you will need to coerce the <a href="/api/store/interfaces/store/store/"><code>Store</code></a> to the refined interface to benefit from the type safety. One easy way to do this is to cast the <a href="/">TinyBase</a> module to the refined module in bulk, and then destructure to get the refined imports:</p><pre><code><span class="keyword">import</span> <span class="operator">*</span> <span class="keyword">as</span> tinybase <span class="keyword">from</span> <span class="string">'tinybase'</span><span class="punctuation">;</span>
<span class="keyword">import</span> shopRefinement <span class="keyword">from</span> <span class="string">'./shop-refinement.d'</span><span class="punctuation">;</span>

<span class="keyword">const</span> <span class="punctuation">{</span>createStore<span class="punctuation">}</span> <span class="operator">=</span> tinybase <span class="keyword">as</span> <span class="keyword">typeof</span> shopRefinement<span class="punctuation">;</span>

<span class="keyword">const</span> shop <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">;</span> <span class="comment">// shop is a refined Store</span>
<span class="comment">// ...</span>
</code></pre><p>This is a particularly good approach for the React module which has many top-level hook and component functions. You don&#x27;t need to refine them one by one:</p><pre><code><span class="keyword">import</span> <span class="operator">*</span> <span class="keyword">as</span> tinybaseUiReact <span class="keyword">from</span> <span class="string">'tinybase/ui-react'</span><span class="punctuation">;</span>
<span class="keyword">import</span> shopUiReactRefinement <span class="keyword">from</span> <span class="string">'./shop-ui-react-refinement.d'</span><span class="punctuation">;</span>

<span class="keyword">const</span> <span class="punctuation">{</span>
  useTables<span class="punctuation">,</span> <span class="comment">// a refined hook</span>
  RowView<span class="punctuation">,</span> <span class="comment">//   a refined component</span>
  <span class="comment">// ...</span>
<span class="punctuation">}</span> <span class="operator">=</span> tinybaseUiReact <span class="keyword">as</span> <span class="keyword">typeof</span> shopUiReactRefinement<span class="punctuation">;</span>

<span class="comment">// ...</span>
</code></pre><p>If you need access to refined types from the generated module definition, you can access them as normal, in a separate import:</p><pre><code><span class="keyword">import</span> <span class="punctuation">{</span>Tables<span class="punctuation">}</span> <span class="keyword">from</span> <span class="string">'./shop-refinement.d'</span><span class="punctuation">;</span>
</code></pre><section class="s2"><h2>Examples</h2><p>This example creates a <a href="/api/tools/interfaces/tools/tools/"><code>Tools</code></a> object and generates type refinements for a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> that already has a <a href="/api/store/type-aliases/schema/tablesschema/"><code>TablesSchema</code></a>.</p><pre><code><span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settablesschema/">setTablesSchema</a></span><span class="punctuation">(</span><span class="punctuation">{</span>
  <span class="literal-property">pets</span><span class="operator">:</span> <span class="punctuation">{</span>
    <span class="literal-property">price</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">type</span><span class="operator">:</span> <span class="string">'number'</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> <span class="punctuation">[</span>refinementDTs<span class="punctuation">,</span> uiReactRefinementDTs<span class="punctuation">]</span> <span class="operator">=</span>
  <span class="function"><a href="/api/tools/functions/creation/createtools/">createTools</a></span><span class="punctuation">(</span>store<span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/tools/interfaces/tools/tools/methods/modelling/getstorerefinement/">getStoreRefinement</a></span><span class="punctuation">(</span><span class="string">'shop'</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> dTsLines <span class="operator">=</span> refinementDTs<span class="punctuation">.</span><span class="function">split</span><span class="punctuation">(</span><span class="string">'\n'</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// console.log(dTsLines[3]);</span>
<span class="comment">// // -> ''</span>
<span class="comment">// console.log(dTsLines[6]);</span>
<span class="comment">// // -> ''</span>
</code></pre><p>This example creates a <a href="/api/tools/interfaces/tools/tools/"><code>Tools</code></a> object and generates code for a <a href="/api/store/interfaces/store/store/"><code>Store</code></a> that doesn&#x27;t already have a <a href="/api/store/type-aliases/schema/tablesschema/"><code>TablesSchema</code></a>.</p><pre><code><span class="keyword">const</span> store <span class="operator">=</span> <span class="function"><a href="/api/store/functions/creation/createstore/">createStore</a></span><span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/store/interfaces/store/store/methods/setter/settable/">setTable</a></span><span class="punctuation">(</span><span class="string">'pets'</span><span class="punctuation">,</span> <span class="punctuation">{</span>
  <span class="literal-property">fido</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">price</span><span class="operator">:</span> <span class="number">5</span><span class="punctuation">}</span><span class="punctuation">,</span>
  <span class="literal-property">felix</span><span class="operator">:</span> <span class="punctuation">{</span><span class="literal-property">price</span><span class="operator">:</span> <span class="number">4</span><span class="punctuation">}</span><span class="punctuation">,</span>
<span class="punctuation">}</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="keyword">const</span> <span class="punctuation">[</span>refinementDTs<span class="punctuation">,</span> uiReactRefinementDTs<span class="punctuation">]</span> <span class="operator">=</span>
  <span class="function"><a href="/api/tools/functions/creation/createtools/">createTools</a></span><span class="punctuation">(</span>store<span class="punctuation">)</span><span class="punctuation">.</span><span class="function"><a href="/api/tools/interfaces/tools/tools/methods/modelling/getstorerefinement/">getStoreRefinement</a></span><span class="punctuation">(</span><span class="string">'shop'</span><span class="punctuation">)</span><span class="punctuation">;</span>

<span class="keyword">const</span> dTsLines <span class="operator">=</span> refinementDTs<span class="punctuation">.</span><span class="function">split</span><span class="punctuation">(</span><span class="string">'\n'</span><span class="punctuation">)</span><span class="punctuation">;</span>
<span class="comment">// console.log(dTsLines[3]);</span>
<span class="comment">// // -> ''</span>
<span class="comment">// console.log(dTsLines[6]);</span>
<span class="comment">// // -> ''</span>
</code></pre></section><section class="s2"><h2>Since</h2><p>v3.1.0</p></section></section>